

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>13. Working with Data from the Web II &mdash; Computational Economics 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Computational Economics 1.0 documentation" href="index.html"/>
        <link rel="next" title="14. Random numbers" href="Slides_Random.html"/>
        <link rel="prev" title="12. Working with Data from the Web I" href="Slides_WebData.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Computational Economics
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Slides_CourseAdministration.html">1. Course Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Basics.html">2. First steps in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Loop.html">3. Basic programming techniques</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Debugging.html">4. Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Arrays.html">5. Vectors and Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Plot.html">6. Plotting using <code class="docutils literal"><span class="pre">matplotlib</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Functions.html">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_OOP.html">8. Object Oriented Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Data_1.html">9. Working with data I: Data cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Data_2.html">10. Working with data II: Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_RegularExpressions.html">11. Regular Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_WebData.html">12. Working with Data from the Web I</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">13. Working with Data from the Web II</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">13.1. Yelp</a></li>
<li class="toctree-l2"><a class="reference internal" href="#economic-data-from-the-federal-reserve">13.2. Economic Data from the Federal Reserve</a></li>
<li class="toctree-l2"><a class="reference internal" href="#more-tutorials">13.3. More Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Random.html">14. Random numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Root.html">15. Root finding</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Optimization.html">16. Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Cake.html">17. Constrainted Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_OLG_I.html">18. A Simple OLG model</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_OLG_II.html">19. An OLG model with labor-leisure choice</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Growth.html">20. Growth Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Assignments.html">21. Assignments</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Computational Economics</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>13. Working with Data from the Web II</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Slides_WebData_2.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="working-with-data-from-the-web-ii">
<h1>13. Working with Data from the Web II<a class="headerlink" href="#working-with-data-from-the-web-ii" title="Permalink to this headline">¶</a></h1>
<p><strong>Application Programming Interfaces (APIs)</strong> provide convenient interfaces
between different applications, independent of the application’s architecture
and programming language that it has been written in.</p>
<p>A <strong>web application API</strong> allows the user to make requests via HTTP for some type
of data and the API will return this data in pre-packaged
<a class="reference external" href="https://en.wikipedia.org/wiki/XML">XML</a> or <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a> formats.</p>
<p>An API request is very much like accessing a website with a browser.  Both
calls use the HTTP protocol to download a file. The only difference is that an
API follows a much more regulated syntax and downloads data in XML (eXtensible
Markup Language) or JSON (JavaScript Object Notation) formats as opposed to
<a class="reference external" href="https://en.wikipedia.org/wiki/HTML">HTML</a> (HyperText Markup Language).</p>
<p>An API uses four separate methods to access a web server via HTTP:</p>
<blockquote>
<div><ol class="arabic simple">
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
</ol>
</div></blockquote>
<p>The GET method is used to download data. The POST method is used to fill out a
form or submit information to the server. PUT is similar to post and used for
updating already existing objects. Most APIs use POST instead of PUT, so PUT is
very rare. Finally, the DELETE method is used to delete information/data from a
web server.</p>
<p>Most websites that provide APIs require prior authentication to operate with the
web server via the API. In other words, you will first need to ‘apply for an
API’ by registering with the website. After registering for an API you may have
to wait for a few days. Once your application is granted you are provided with
an <code class="docutils literal"><span class="pre">api_key</span></code> value that allows the server to identify you when you are making
your calls.</p>
<p>Some APIs require more detailed forms of identification using the
<a class="reference external" href="https://en.wikipedia.org/wiki/OAuth">OAuth</a> protocol. The rating site
<a class="reference external" href="http://www.yelp.com">Yelp</a> for instance requires the following protocol
parameters for each request:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">OAuth Parameter</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>oauth_consumer_key</td>
<td>Your OAuth consumer key (from Manage API Access)</td>
</tr>
<tr class="row-odd"><td>oauth_token</td>
<td>The access token obtained (from Manage API Access)</td>
</tr>
<tr class="row-even"><td>oauth_signature_method</td>
<td>hmac-sha1</td>
</tr>
<tr class="row-odd"><td>oauth_signature</td>
<td>The generated request signature, signed with the oauth_token_secret obtained</td>
</tr>
<tr class="row-even"><td>oauth_timestamp</td>
<td>Timestamp for the request in secs since the Unix epoch</td>
</tr>
<tr class="row-odd"><td>oauth_nonce</td>
<td>A unique string randomly generated per request</td>
</tr>
</tbody>
</table>
<p>This seems a bit complicated, but most larger website provide sample codes for
using their APIs in various popular programming languages. Sometimes, they even
provide small <strong>Python</strong> libraries to facilitate the interaction with their
website.</p>
<div class="section" id="id1">
<h2>13.1. Yelp<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>For interacting with the Yelp API for instance you could download the provided
Python library from <a class="reference external" href="https://github.com/Yelp/yelp-python">here</a>. If you want
to install this library you simply open a command line window (in Windows click
on the windows start menu and type cmd followed by enter) and type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">yelp</span>
</pre></div>
</div>
<p>In order to use this library you can then simply write a small script as
follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">yelp.client</span> <span class="k">import</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="nn">yelp.oauth1_authenticator</span> <span class="k">import</span> <span class="n">Oauth1Authenticator</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">Oauth1Authenticator</span><span class="p">(</span><span class="n">consumer_key</span><span class="o">=</span><span class="s1">&#39;YOUR_CONSUMER_KEY&#39;</span><span class="p">,</span> \
  <span class="n">consumer_secret</span><span class="o">=</span><span class="s1">&#39;YOUR_CONSUMER_SECRET&#39;</span><span class="p">,</span> \
  <span class="n">token</span><span class="o">=</span><span class="s1">&#39;YOUR_TOKEN&#39;</span><span class="p">,</span> \
  <span class="n">token_secret</span><span class="o">=</span><span class="s1">&#39;YOUR_TOKEN_SECRET&#39;</span>
<span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span>
</pre></div>
</div>
<p>You can then search the <code class="docutils literal"><span class="pre">client</span></code> object with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;term&#39;</span><span class="p">:</span> <span class="s1">&#39;food&#39;</span><span class="p">,</span>
  <span class="s1">&#39;lang&#39;</span><span class="p">:</span> <span class="s1">&#39;fr&#39;</span>
<span class="p">}</span>

<span class="n">client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;San Francisco&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="economic-data-from-the-federal-reserve">
<h2>13.2. Economic Data from the Federal Reserve<a class="headerlink" href="#economic-data-from-the-federal-reserve" title="Permalink to this headline">¶</a></h2>
<p>The website <a class="reference external" href="https://www.quandl.com/">Quandl</a> provides a very convenient API
to download Economic data from various databases.
<a class="reference external" href="https://www.quandl.com/browse">Here</a>
is a list of databases
that are accessible.</p>
<p>The <a class="reference external" href="https://www.quandl.com/data/FRED?keyword=">Federal Reserve Economic Data (FRED)</a>
is one of the accessible
databases.  Quandl provides a nice <a class="reference external" href="https://www.quandl.com/tools/python">Python wrapper</a>
which is a Python library that helps you to
easily interact with the API of the website similar to the <code class="docutils literal"><span class="pre">Yelp</span></code> library
above.</p>
<p>After applying for a free account with Quandl, you will receive an <code class="docutils literal"><span class="pre">author-token</span></code>.
Every time you access the API you need to provide this code. In addition you
need to install the <code class="docutils literal"><span class="pre">Quandl</span></code> library using:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">Quandl</span>
</pre></div>
</div>
<p>You can now easily download data from the FRED database as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">Quandl</span>

<span class="c1"># Download data from Quandl</span>
<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="c1"># Quartely data</span>
<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="n">df_q</span> <span class="o">=</span> <span class="n">Quandl</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;FRED/GDP&quot;</span><span class="p">,</span> <span class="s2">&quot;FRED/GDPC1&quot;</span><span class="p">,</span> <span class="s2">&quot;FRED/PCECC96&quot;</span><span class="p">,</span> \
    <span class="s2">&quot;FRED/PCNDGC96&quot;</span><span class="p">,</span> <span class="s2">&quot;FRED/DCLORX1Q020SBEA&quot;</span><span class="p">,</span> <span class="s2">&quot;FRED/UNRATE&quot;</span><span class="p">],</span> \
    <span class="n">authtoken</span> <span class="o">=</span> <span class="s1">&#39;author-token&#39;</span><span class="p">,</span> \
    <span class="n">trim_start</span><span class="o">=</span><span class="s2">&quot;1950-1-1&quot;</span><span class="p">,</span> <span class="n">trim_end</span><span class="o">=</span><span class="s2">&quot;2015-12-31&quot;</span><span class="p">,</span> <span class="n">collapse</span> <span class="o">=</span> <span class="s1">&#39;quarterly&#39;</span><span class="p">)</span>
<span class="n">df_q</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GDP&#39;</span><span class="p">,</span> <span class="s1">&#39;realGDP&#39;</span><span class="p">,</span> <span class="s1">&#39;Consumption&#39;</span><span class="p">,</span> <span class="s1">&#39;Non-Durables&#39;</span><span class="p">,</span> \
    <span class="s1">&#39;ClothingShoes&#39;</span><span class="p">,</span><span class="s1">&#39;Unemployment&#39;</span><span class="p">]</span>

<span class="c1"># Monthly data</span>
<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="n">df_m</span> <span class="o">=</span> <span class="n">Quandl</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;FRED/UNRATE&quot;</span><span class="p">,</span> <span class="s2">&quot;FRED/FEDFUNDS&quot;</span><span class="p">,</span> <span class="s2">&quot;FRED/CPIAUCSL&quot;</span><span class="p">],</span> \
    <span class="n">authtoken</span> <span class="o">=</span> <span class="s1">&#39;author-token&#39;</span><span class="p">,</span> \
    <span class="n">trim_start</span><span class="o">=</span><span class="s2">&quot;1950-1-1&quot;</span><span class="p">,</span> <span class="n">trim_end</span><span class="o">=</span><span class="s2">&quot;2015-12-31&quot;</span><span class="p">,</span> <span class="n">collapse</span> <span class="o">=</span> <span class="s1">&#39;monthly&#39;</span><span class="p">)</span>
<span class="n">df_m</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Unemployment&#39;</span><span class="p">,</span> <span class="s1">&#39;Interest-Rate&#39;</span><span class="p">,</span> <span class="s1">&#39;CPI_Urban&#39;</span><span class="p">]</span>

<span class="c1"># Annual data</span>
<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="n">df_a</span> <span class="o">=</span> <span class="n">Quandl</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;FRED/UNRATE&quot;</span><span class="p">,</span> <span class="s2">&quot;FRED/FEDFUNDS&quot;</span><span class="p">,</span> <span class="s2">&quot;FRED/CPIAUCSL&quot;</span><span class="p">],</span> \
    <span class="n">authtoken</span> <span class="o">=</span> <span class="s1">&#39;author-token&#39;</span><span class="p">,</span> \
    <span class="n">trim_start</span><span class="o">=</span><span class="s2">&quot;1950-1-1&quot;</span><span class="p">,</span> <span class="n">trim_end</span><span class="o">=</span><span class="s2">&quot;2015-12-31&quot;</span><span class="p">,</span> <span class="n">collapse</span> <span class="o">=</span> <span class="s1">&#39;annual&#39;</span><span class="p">)</span>
<span class="n">df_a</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Unemployment&#39;</span><span class="p">,</span> <span class="s1">&#39;Interest-Rate&#39;</span><span class="p">,</span> <span class="s1">&#39;CPI_Urban&#39;</span><span class="p">]</span>

<span class="c1"># Plot data</span>
<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="n">df_q</span><span class="p">[[</span><span class="s1">&#39;GDP&#39;</span><span class="p">,</span> <span class="s1">&#39;realGDP&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Nominal and Real US-GDP&#39;</span><span class="p">)</span>
<span class="c1"># You can also save your graphs using</span>
<span class="c1">#plt.savefig(gtexpath+&#39;GDP_Fig1.png&#39;, format=&#39;png&#39;)</span>
<span class="c1">#plt.show()</span>
</pre></div>
</div>
<p>This will download GDP and other variables and plot them. When you download the
data you can specify the time frame. This will of course depend on the specific
time series you are interested in. Read the documentation about the
data on the <a class="reference external" href="https://www.quandl.com/data/FRED?keyword=">FRED</a> to see what is
available.</p>
</div>
<div class="section" id="more-tutorials">
<h2>13.3. More Tutorials<a class="headerlink" href="#more-tutorials" title="Permalink to this headline">¶</a></h2>
<p>Here are additional web tutorials about how to use Python together
with the API of popular websites:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://espn.go.com/apis/devcenter/docs/">ESPN APIs</a></li>
<li><a class="reference external" href="https://developer-tripadvisor.com/content-api/documentation/">Trip Advisor API</a></li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/List_of_news_media_APIs">List of media APIs</a></li>
<li><a class="reference external" href="http://www.pythonforbeginners.com/api/list-of-python-apis">List of Python APIs for beginners</a></li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Slides_Random.html" class="btn btn-neutral float-right" title="14. Random numbers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Slides_WebData.html" class="btn btn-neutral" title="12. Working with Data from the Web I" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Juergen Jung.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>