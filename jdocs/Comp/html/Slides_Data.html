

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Working with data &mdash; Computational Economics 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Computational Economics 1.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Computational Economics
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Slides_CourseAdministration.html">1. Course Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Basics.html">2. First steps in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Loop.html">3. Basic programming techniques</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Debugging.html">4. Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Arrays.html">5. Vectors and Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Plot.html">6. Plotting using <code class="docutils literal"><span class="pre">matplotlib</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Functions.html">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_OOP.html">8. Object Oriented Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Data_1.html">9. Working with data I: Data cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Data_2.html">10. Working with data II: Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_RegularExpressions.html">11. Regular Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_WebData.html">12. Working with Data from the Web I</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_WebData_2.html">13. Working with Data from the Web II</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Random.html">14. Random numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Root.html">15. Root finding</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Optimization.html">16. Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Cake.html">17. Constrainted Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_OLG_I.html">18. A Simple OLG model</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_OLG_II.html">19. An OLG model with labor-leisure choice</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Growth.html">20. Growth Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Assignments.html">21. Assignments</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Computational Economics</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Working with data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Slides_Data.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="working-with-data">
<h1>Working with data<a class="headerlink" href="#working-with-data" title="Permalink to this headline">¶</a></h1>
<p>We will be working with two data sets.
<a class="reference download internal" href="_downloads/Lecture_Data_Excel_a.csv" download=""><code class="xref download docutils literal"><span class="pre">Lecture_Data_Excel_a.csv</span></code></a>.
<a class="reference download internal" href="_downloads/Lecture_Data_Excel_b.csv" download=""><code class="xref download docutils literal"><span class="pre">Lecture_Data_Excel_b.csv</span></code></a>.</p>
<div class="section" id="read-in-small-data-set-from-a-comma-separated-csv-file">
<h2>Read in small data set from a comma separated (.csv) file<a class="headerlink" href="#read-in-small-data-set-from-a-comma-separated-csv-file" title="Permalink to this headline">¶</a></h2>
<p>We use the <code class="docutils literal"><span class="pre">Pandas</span></code> package for data work.  We can import the <code class="docutils literal"><span class="pre">Pandas</span></code>
library using the <code class="docutils literal"><span class="pre">import</span></code> statement.  <code class="docutils literal"><span class="pre">Pandas</span></code> allows easy organization of
data in the spirit of <code class="docutils literal"><span class="pre">DataFrame</span></code> concept in <strong>R</strong>. You can think of a
<strong>DataFrame</strong> as an array with labels similar to an Excel spreadsheet.</p>
<p>A <strong>DataFrame</strong> can be created in the following ways:</p>
<blockquote>
<div><ul class="simple">
<li>From another <strong>DataFrame</strong>.</li>
<li>From a <code class="docutils literal"><span class="pre">numpy</span></code> array.</li>
<li>From another <code class="docutils literal"><span class="pre">pandas</span></code> data structure called <code class="docutils literal"><span class="pre">series</span></code> which is basically
a one dimensional <strong>DataFrame</strong>, i.e., a column or row of a matrix.</li>
<li>From a file like a CSV file etc.</li>
</ul>
</div></blockquote>
<p>The first dataset that we are working with is a comma separated file, called
<a class="reference download internal" href="_downloads/Lecture_Data_Excel_a.csv" download=""><code class="xref download docutils literal"><span class="pre">Lecture_Data_Excel_a.csv</span></code></a>.
We first import this file using the <code class="docutils literal"><span class="pre">pd.read_csv</span></code> command from the <code class="docutils literal"><span class="pre">Pandas</span></code> library.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">ggplot</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span> <span class="k">as</span> <span class="n">st</span>
<span class="kn">import</span> <span class="nn">math</span> <span class="kn">as</span> <span class="nn">m</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">time</span>  <span class="c1"># Imports system time module to time your script</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>  <span class="c1"># close all open figures</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Read in small data from .csv file</span>
<span class="c1"># Filepath</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="s1">&#39;Lecture_Data/&#39;</span>
<span class="c1"># In windows you can also specify the absolute path to your data file</span>
<span class="c1"># filepath =</span>
<span class="s1">&#39;C:/Dropbox/Towson/Teaching/3_ComputationalEconomics/Lectures/Lecture_Data/&#39;</span>

<span class="c1"># ------------- Load data --------------------</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filepath</span> <span class="o">+</span> <span class="s1">&#39;Lecture_Data_Excel_a.csv&#39;</span><span class="p">,</span>
<span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Frequency&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">})</span>

<span class="c1"># Let&#39;s have a look at it, it&#39;s a nested list</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">Area</span>  <span class="n">Frequency</span>  <span class="n">Unnamed</span><span class="p">:</span> <span class="mi">2</span>  <span class="n">Unnamed</span><span class="p">:</span> <span class="mi">3</span>
<span class="mi">0</span>          <span class="n">Accounting</span>         <span class="mi">73</span>         <span class="n">NaN</span>         <span class="n">NaN</span>
<span class="mi">1</span>             <span class="n">Finance</span>         <span class="mi">52</span>         <span class="n">NaN</span>         <span class="n">NaN</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>         <span class="mi">36</span>         <span class="n">NaN</span>         <span class="n">NaN</span>
<span class="mi">3</span>     <span class="n">Marketing</span> <span class="n">sales</span>         <span class="mi">64</span>         <span class="n">NaN</span>         <span class="n">NaN</span>
<span class="mi">4</span>               <span class="n">other</span>         <span class="mi">28</span>         <span class="n">NaN</span>         <span class="n">NaN</span>
</pre></div>
</div>
<p>Alternatively we could have use the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="n">filepath</span> <span class="o">+</span> <span class="s1">&#39;Lecture_Data_Excel_a.csv&#39;</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Pandas</span></code> also has a built in Excel file reader that you can call as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Read entire excel spreadsheet</span>
<span class="n">xl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s2">&quot;Lecture_Data_Excel_a.xlsx&quot;</span><span class="p">)</span>

<span class="c1"># Check how many sheets we have inside the excel file</span>
<span class="n">xl</span><span class="o">.</span><span class="n">sheet_names</span>
<span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Sheet2&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Sheet3&#39;</span><span class="p">]</span>

<span class="c1"># Pick one sheet and define it as your DataFrame by parsing a sheet</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">xl</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;Sheet1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <strong>DataFrame</strong> has an index for each row and a column header. We can query a
<strong>DataFrame</strong> as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Shape&#39;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;-------------------------&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Number of rows&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;-------------------------&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Column headers&#39;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;-------------------------&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Data types&#39;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;-------------------------&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Index&#39;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;-------------------------&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Shape</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="o">-------------------------</span>
<span class="n">Number</span> <span class="n">of</span> <span class="n">rows</span> <span class="mi">5</span>
<span class="o">-------------------------</span>
<span class="n">Column</span> <span class="n">headers</span> <span class="n">Index</span><span class="p">([</span><span class="s1">&#39;Area&#39;</span><span class="p">,</span> <span class="s1">&#39;Frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Unnamed: 2&#39;</span><span class="p">,</span> <span class="s1">&#39;Unnamed:</span>
<span class="mi">3</span><span class="s1">&#39;], dtype=&#39;</span><span class="nb">object</span><span class="s1">&#39;)</span>
<span class="o">-------------------------</span>
<span class="n">Data</span> <span class="n">types</span> <span class="n">Area</span>           <span class="nb">object</span>
<span class="n">Frequency</span>     <span class="n">float64</span>
<span class="n">Unnamed</span><span class="p">:</span> <span class="mi">2</span>    <span class="n">float64</span>
<span class="n">Unnamed</span><span class="p">:</span> <span class="mi">3</span>    <span class="n">float64</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
<span class="o">-------------------------</span>
<span class="n">Index</span> <span class="n">Int64Index</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int64&#39;</span><span class="p">)</span>
<span class="o">-------------------------</span>
</pre></div>
</div>
<p>Drop column 3 and 4 and let’s have a look at the data again.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Unnamed: 2&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Unnamed: 3&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># Let&#39;s have a look at it, it&#39;s a nested list</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">Area</span>  <span class="n">Frequency</span>
<span class="mi">0</span>          <span class="n">Accounting</span>         <span class="mi">73</span>
<span class="mi">1</span>             <span class="n">Finance</span>         <span class="mi">52</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>         <span class="mi">36</span>
<span class="mi">3</span>     <span class="n">Marketing</span> <span class="n">sales</span>         <span class="mi">64</span>
<span class="mi">4</span>               <span class="n">other</span>         <span class="mi">28</span>
</pre></div>
</div>
<p>Sometimes column headers have white spaces in them. It is probably a good idea
to remove all white spaces from header names. You can use the <code class="docutils literal"><span class="pre">.strip()</span></code>
command to accomplish this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</pre></div>
</div>
<p>Here we use the <code class="docutils literal"><span class="pre">lambda</span></code> command which is an inline function. Basically it is
a shortcut so that we don’t have to write a separate function using the <code class="docutils literal"><span class="pre">def</span></code>
keyword etc. It’s a shortcut for functions that you want to define ‘on the fly.’</p>
<p>We next generate a new variable called <code class="docutils literal"><span class="pre">relFrequency</span></code> that contains the relative
frequencies.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Make new column with relative frequency</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;relFrequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Frequency&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="c1"># Let&#39;s have a look at it, it&#39;s a nested list</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">Area</span>  <span class="n">Frequency</span>  <span class="n">relFrequency</span>
<span class="mi">0</span>          <span class="n">Accounting</span>         <span class="mi">73</span>      <span class="mf">0.288538</span>
<span class="mi">1</span>             <span class="n">Finance</span>         <span class="mi">52</span>      <span class="mf">0.205534</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>         <span class="mi">36</span>      <span class="mf">0.142292</span>
<span class="mi">3</span>     <span class="n">Marketing</span> <span class="n">sales</span>         <span class="mi">64</span>      <span class="mf">0.252964</span>
<span class="mi">4</span>               <span class="n">other</span>         <span class="mi">28</span>      <span class="mf">0.110672</span>
</pre></div>
</div>
<p>Now we grab the relative frequencies out of the DataFrame into a numpy array.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">xv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;relFrequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Array xv is:&#39;</span><span class="p">,</span> <span class="n">xv</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Array</span> <span class="n">xv</span> <span class="ow">is</span><span class="p">:</span> <span class="p">[</span> <span class="mf">0.28853755</span>  <span class="mf">0.2055336</span>   <span class="mf">0.14229249</span>  <span class="mf">0.25296443</span>
<span class="mf">0.11067194</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Let us make additional columns</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;random&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Frequency&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="c1"># Let&#39;s have a look at it, it&#39;s a nested list</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">Area</span>  <span class="n">Frequency</span>  <span class="n">relFrequency</span>    <span class="n">random</span>
<span class="mi">0</span>          <span class="n">Accounting</span>         <span class="mi">73</span>      <span class="mf">0.288538</span>  <span class="mf">0.288538</span>
<span class="mi">1</span>             <span class="n">Finance</span>         <span class="mi">52</span>      <span class="mf">0.205534</span>  <span class="mf">0.205534</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>         <span class="mi">36</span>      <span class="mf">0.142292</span>  <span class="mf">0.142292</span>
<span class="mi">3</span>     <span class="n">Marketing</span> <span class="n">sales</span>         <span class="mi">64</span>      <span class="mf">0.252964</span>  <span class="mf">0.252964</span>
<span class="mi">4</span>               <span class="n">other</span>         <span class="mi">28</span>      <span class="mf">0.110672</span>  <span class="mf">0.110672</span>
</pre></div>
</div>
</div>
<div class="section" id="some-pandas-tricks">
<h2>Some Pandas tricks<a class="headerlink" href="#some-pandas-tricks" title="Permalink to this headline">¶</a></h2>
<div class="section" id="renaming-variables">
<h3>Renaming variables<a class="headerlink" href="#renaming-variables" title="Permalink to this headline">¶</a></h3>
<p>For renaming column names we use a dictionary as follows.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Area&#39;</span><span class="p">:</span> <span class="s1">&#39;area&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Frequency&#39;</span><span class="p">:</span> <span class="s1">&#39;absFrequency&#39;</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">relFrequency</span>    <span class="n">random</span>
<span class="mi">0</span>          <span class="n">Accounting</span>            <span class="mi">73</span>      <span class="mf">0.288538</span>  <span class="mf">0.288538</span>
<span class="mi">1</span>             <span class="n">Finance</span>            <span class="mi">52</span>      <span class="mf">0.205534</span>  <span class="mf">0.205534</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>            <span class="mi">36</span>      <span class="mf">0.142292</span>  <span class="mf">0.142292</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">head(x)</span></code> method allows us to print <code class="docutils literal"><span class="pre">x</span></code> rows from the top of the
<strong>DataFrame</strong>, whereas the <code class="docutils literal"><span class="pre">tail(x)</span></code> method does the same from the bottom of
the DataFrame.</p>
</div>
<div class="section" id="adding-a-new-column">
<h3>Adding a new column<a class="headerlink" href="#adding-a-new-column" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Drop a column first so everything fits</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;random&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Create a new column with some missing values</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;team&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">NaN</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="c1"># or insert new column at specific location</span>
<span class="n">df</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s1">&#39;position&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">NaN</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>

<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">0</span>          <span class="n">Accounting</span>            <span class="mi">73</span>       <span class="n">NaN</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>
<span class="mi">1</span>             <span class="n">Finance</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>            <span class="mi">36</span>       <span class="n">NaN</span>      <span class="mf">0.142292</span>   <span class="n">NaN</span>
<span class="mi">3</span>     <span class="n">Marketing</span> <span class="n">sales</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>
<span class="mi">4</span>               <span class="n">other</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="section" id="missing-values-of-nan-s">
<h3>Missing values of NaN’s<a class="headerlink" href="#missing-values-of-nan-s" title="Permalink to this headline">¶</a></h3>
<p><strong>Count NaNs</strong></p>
<p>Count the number of rows with missing values.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">nans</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> rows have missing values&#39;</span> <span class="o">%</span> <span class="n">nans</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">rows</span> <span class="n">have</span> <span class="n">missing</span> <span class="n">values</span>
</pre></div>
</div>
<p><strong>Select rows with NaNs or overwrite NaNs</strong></p>
<p>If you want to select the rows with missing values you can index them with the
<code class="docutils literal"><span class="pre">isnull()</span></code> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">0</span>          <span class="n">Accounting</span>            <span class="mi">73</span>       <span class="n">NaN</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>            <span class="mi">36</span>       <span class="n">NaN</span>      <span class="mf">0.142292</span>   <span class="n">NaN</span>
</pre></div>
</div>
<p>Or if you want to search specific columns for missing values you can do</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;team&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>            <span class="mi">36</span>       <span class="n">NaN</span>      <span class="mf">0.142292</span>   <span class="n">NaN</span>
</pre></div>
</div>
<p>Or if you want to grab all the rows without missing observations you can index
the dataframe with the <code class="docutils literal"><span class="pre">notnull()</span></code> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;team&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>              <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">0</span>       <span class="n">Accounting</span>            <span class="mi">73</span>       <span class="n">NaN</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>
<span class="mi">1</span>          <span class="n">Finance</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>
<span class="mi">3</span>  <span class="n">Marketing</span> <span class="n">sales</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>
<span class="mi">4</span>            <span class="n">other</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>
</pre></div>
</div>
<p><strong>Delete rows with NaNs</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>              <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">1</span>          <span class="n">Finance</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>
<span class="mi">3</span>  <span class="n">Marketing</span> <span class="n">sales</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>
<span class="mi">4</span>            <span class="n">other</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>
</pre></div>
</div>
<p>You can also reassign it to the orignal DataFrame or assign
a new one.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">df2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>              <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">1</span>          <span class="n">Finance</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>
<span class="mi">3</span>  <span class="n">Marketing</span> <span class="n">sales</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>
<span class="mi">4</span>            <span class="n">other</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>
</pre></div>
</div>
<p><strong>Overwriting NaN with specific values</strong>
If we want to overwrite the <code class="docutils literal"><span class="pre">NaN</span></code> entries with values we can use the
<code class="docutils literal"><span class="pre">fillna()</span></code> method. In this example we replace all missing values with zeros.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">0</span>          <span class="n">Accounting</span>            <span class="mi">73</span>         <span class="mi">0</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>
<span class="mi">1</span>             <span class="n">Finance</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>            <span class="mi">36</span>         <span class="mi">0</span>      <span class="mf">0.142292</span>     <span class="mi">0</span>
<span class="mi">3</span>     <span class="n">Marketing</span> <span class="n">sales</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>
<span class="mi">4</span>               <span class="n">other</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="section" id="add-rows-to-the-dataframe">
<h3>Add rows to the DataFrame<a class="headerlink" href="#add-rows-to-the-dataframe" title="Permalink to this headline">¶</a></h3>
<p>We can use the <code class="docutils literal"><span class="pre">append()</span></code> method to add rows to the DataFrame.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
                <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span> <span class="c1"># Fill cells with NaNs</span>
                <span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span>
                <span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>              <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">3</span>  <span class="n">Marketing</span> <span class="n">sales</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>
<span class="mi">4</span>            <span class="n">other</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>
<span class="mi">5</span>              <span class="n">NaN</span>           <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>   <span class="n">NaN</span>
</pre></div>
</div>
<p>We can then fill this empty row with data.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;area&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Economics&#39;</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;absFrequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">25</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">0</span>          <span class="n">Accounting</span>            <span class="mi">73</span>         <span class="mi">0</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>
<span class="mi">1</span>             <span class="n">Finance</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>            <span class="mi">36</span>         <span class="mi">0</span>      <span class="mf">0.142292</span>     <span class="mi">0</span>
<span class="mi">3</span>     <span class="n">Marketing</span> <span class="n">sales</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>
<span class="mi">4</span>               <span class="n">other</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>
<span class="mi">5</span>           <span class="n">Economics</span>            <span class="mi">25</span>       <span class="n">NaN</span>           <span class="n">NaN</span>   <span class="n">NaN</span>
</pre></div>
</div>
</div>
<div class="section" id="sorting-and-reindexing-dataframes">
<h3>Sorting and reindexing DataFrames<a class="headerlink" href="#sorting-and-reindexing-dataframes" title="Permalink to this headline">¶</a></h3>
<p>We next sort the DataFrame by a certain column (from highest to lowest) using
the <code class="docutils literal"><span class="pre">sort()</span></code> DataFrame method.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;absFrequency&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">0</span>          <span class="n">Accounting</span>            <span class="mi">73</span>         <span class="mi">0</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>
<span class="mi">3</span>     <span class="n">Marketing</span> <span class="n">sales</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>
<span class="mi">1</span>             <span class="n">Finance</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>
<span class="mi">2</span>  <span class="n">General</span> <span class="n">management</span>            <span class="mi">36</span>         <span class="mi">0</span>      <span class="mf">0.142292</span>     <span class="mi">0</span>
<span class="mi">4</span>               <span class="n">other</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">inplace=True</span></code> option will immediately overwrite the DataFrame <code class="docutils literal"><span class="pre">df</span></code>
with the new, sorted, one. If you set <code class="docutils literal"><span class="pre">inplace=False</span></code> you would have to
assign a new DataFrame in order to see the changes:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;absFrequency&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Where <code class="docutils literal"><span class="pre">df1</span></code> would now be the sorted DataFrame and the original <code class="docutils literal"><span class="pre">df</span></code>
DataFrame would still be unsorted. However, we now have two objects with
identical data in it which could become a memory problem if the DataFrames are
very large. Setting <code class="docutils literal"><span class="pre">inplace=True</span></code> is probably a good default setting.</p>
<p>If we want we could then reindex the DataFrame according to the new sort order.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>                 <span class="n">area</span>  <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">1</span>          <span class="n">Accounting</span>            <span class="mi">73</span>         <span class="mi">0</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>
<span class="mi">2</span>     <span class="n">Marketing</span> <span class="n">sales</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>
<span class="mi">3</span>             <span class="n">Finance</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>
<span class="mi">4</span>  <span class="n">General</span> <span class="n">management</span>            <span class="mi">36</span>         <span class="mi">0</span>      <span class="mf">0.142292</span>     <span class="mi">0</span>
<span class="mi">5</span>               <span class="n">other</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="section" id="merging-dataframes-or-adding-columns">
<h3>Merging DataFrames or adding columns<a class="headerlink" href="#merging-dataframes-or-adding-columns" title="Permalink to this headline">¶</a></h3>
<p>Let us create a new <strong>DataFrame</strong> that has the variable <code class="docutils literal"><span class="pre">team</span></code> in common with the previous
DataFrame. This new DataFrame contains additional team information that we
would like to merge into the original DataFrame.</p>
<p>First we define the new DataFrame and add some values to it:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df_team</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;team&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> \
                        <span class="s1">&#39;sales&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">500</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">250</span><span class="p">,</span><span class="mi">450</span><span class="p">,</span><span class="mi">345</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">432</span><span class="p">,</span><span class="mi">890</span><span class="p">]})</span>

<span class="k">print</span><span class="p">(</span><span class="n">df_team</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="n">sales</span>  <span class="n">team</span>
<span class="mi">0</span>    <span class="mi">500</span>     <span class="mi">3</span>
<span class="mi">1</span>    <span class="mi">300</span>     <span class="mi">4</span>
<span class="mi">2</span>    <span class="mi">250</span>     <span class="mi">5</span>
<span class="mi">3</span>    <span class="mi">450</span>     <span class="mi">6</span>
<span class="mi">4</span>    <span class="mi">345</span>     <span class="mi">7</span>
<span class="mi">5</span>    <span class="mi">123</span>     <span class="mi">8</span>
<span class="mi">6</span>    <span class="mi">432</span>     <span class="mi">9</span>
<span class="mi">7</span>    <span class="mi">890</span>    <span class="mi">10</span>
</pre></div>
</div>
<p>This new DataFrame contains some sales information for each team. We next merge
this info into the main DataFrame using the <code class="docutils literal"><span class="pre">team</span></code> column as merge key or key
variable. Before we merge in the new info we drop the <code class="docutils literal"><span class="pre">area</span></code> column so that
the DataFrame fits on the screen.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;area&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_team</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;team&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>  <span class="n">sales</span>
<span class="mi">0</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>    <span class="mi">450</span>
<span class="mi">1</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>    <span class="mi">300</span>
<span class="mi">2</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>    <span class="mi">890</span>
</pre></div>
</div>
<p>The inner merge only keeps observations that are present in both DataFrames.
This is often too restrictive as many observations will be dropped.</p>
<p>The next one, <code class="docutils literal"><span class="pre">left</span></code>, keeps the original (or main DataFrame) and adds the new
information on the left. When it cannot find a team number in the main
DataFrame it simply drops the info from the new DataFrame.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_team</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;team&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>  <span class="n">sales</span>
<span class="mi">0</span>            <span class="mi">73</span>         <span class="mi">0</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>    <span class="n">NaN</span>
<span class="mi">1</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>    <span class="mi">450</span>
<span class="mi">2</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>    <span class="mi">300</span>
<span class="mi">3</span>            <span class="mi">36</span>         <span class="mi">0</span>      <span class="mf">0.142292</span>     <span class="mi">0</span>    <span class="n">NaN</span>
<span class="mi">4</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>    <span class="mi">890</span>
<span class="mi">5</span>            <span class="mi">25</span>       <span class="n">NaN</span>           <span class="n">NaN</span>   <span class="n">NaN</span>    <span class="n">NaN</span>
</pre></div>
</div>
<p>The next method only keeps info from the new DataFrame and adds the info of
the original main DataFrame.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_team</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;team&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>  <span class="n">sales</span>
<span class="mi">0</span>            <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>    <span class="mi">450</span>
<span class="mi">1</span>            <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>    <span class="mi">300</span>
<span class="mi">2</span>            <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>    <span class="mi">890</span>
<span class="mi">3</span>           <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>     <span class="mi">3</span>    <span class="mi">500</span>
<span class="mi">4</span>           <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>     <span class="mi">5</span>    <span class="mi">250</span>
<span class="mi">5</span>           <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>     <span class="mi">7</span>    <span class="mi">345</span>
<span class="mi">6</span>           <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>     <span class="mi">8</span>    <span class="mi">123</span>
<span class="mi">7</span>           <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>     <span class="mi">9</span>    <span class="mi">432</span>
</pre></div>
</div>
<p>The final merge method merges by team whenever possible but keeps the info from both
DataFrames, even for observations where no merge/overlap occurred.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_team</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;team&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="n">absFrequency</span>  <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>  <span class="n">sales</span>
<span class="mi">0</span>             <span class="mi">73</span>         <span class="mi">0</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>    <span class="n">NaN</span>
<span class="mi">1</span>             <span class="mi">64</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>    <span class="mi">450</span>
<span class="mi">2</span>             <span class="mi">52</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>    <span class="mi">300</span>
<span class="mi">3</span>             <span class="mi">36</span>         <span class="mi">0</span>      <span class="mf">0.142292</span>     <span class="mi">0</span>    <span class="n">NaN</span>
<span class="mi">4</span>             <span class="mi">28</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>    <span class="mi">890</span>
<span class="mi">5</span>             <span class="mi">25</span>       <span class="n">NaN</span>           <span class="n">NaN</span>   <span class="n">NaN</span>    <span class="n">NaN</span>
<span class="mi">6</span>            <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>     <span class="mi">3</span>    <span class="mi">500</span>
<span class="mi">7</span>            <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>     <span class="mi">5</span>    <span class="mi">250</span>
<span class="mi">8</span>            <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>     <span class="mi">7</span>    <span class="mi">345</span>
<span class="mi">9</span>            <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>     <span class="mi">8</span>    <span class="mi">123</span>
<span class="mi">10</span>           <span class="n">NaN</span>       <span class="n">NaN</span>           <span class="n">NaN</span>     <span class="mi">9</span>    <span class="mi">432</span>
</pre></div>
</div>
</div>
<div class="section" id="converting-column-types">
<h3>Converting Column Types<a class="headerlink" href="#converting-column-types" title="Permalink to this headline">¶</a></h3>
<p>When converting text into a DataFrame to conduct statistical analysis it is
sometimes necessary to convert a numbers column that is still a string, into
floats, so that we can do math. Let’s drop some more columns first so the DataFrame
fits nicely in the output window.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;absFrequency&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># Let&#39;s have a look at it, it&#39;s a nested list</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span>
<span class="mi">1</span>         <span class="mi">0</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>
<span class="mi">2</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>
<span class="mi">3</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>
<span class="mi">4</span>         <span class="mi">0</span>      <span class="mf">0.142292</span>     <span class="mi">0</span>
<span class="mi">5</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>
<span class="mi">6</span>       <span class="n">NaN</span>           <span class="n">NaN</span>   <span class="n">NaN</span>
</pre></div>
</div>
<p>We now generate a column of “words” or “strings” that happen do be numbers.
Since they are defined as words, we cannot run statistical analysis on these
numbers yet.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;40&#39;</span><span class="p">,</span><span class="s1">&#39;34&#39;</span><span class="p">,</span><span class="s1">&#39;6&#39;</span><span class="p">,</span><span class="s1">&#39;10&#39;</span><span class="p">,</span><span class="s1">&#39;200&#39;</span><span class="p">],</span>
<span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="c1"># Print DataFrame</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Print summary statistics</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="n">position</span>  <span class="n">relFrequency</span>  <span class="n">team</span> <span class="n">string</span>
<span class="mi">1</span>         <span class="mi">0</span>      <span class="mf">0.288538</span>     <span class="mi">2</span>      <span class="mi">2</span>
<span class="mi">2</span>         <span class="mi">1</span>      <span class="mf">0.252964</span>     <span class="mi">6</span>     <span class="mi">40</span>
<span class="mi">3</span>         <span class="mi">1</span>      <span class="mf">0.205534</span>     <span class="mi">4</span>     <span class="mi">34</span>
<span class="mi">4</span>         <span class="mi">0</span>      <span class="mf">0.142292</span>     <span class="mi">0</span>      <span class="mi">6</span>
<span class="mi">5</span>         <span class="mi">3</span>      <span class="mf">0.110672</span>    <span class="mi">10</span>     <span class="mi">10</span>
<span class="mi">6</span>       <span class="n">NaN</span>           <span class="n">NaN</span>   <span class="n">NaN</span>    <span class="mi">200</span>
       <span class="n">position</span>  <span class="n">relFrequency</span>       <span class="n">team</span>
<span class="n">count</span>  <span class="mf">5.000000</span>      <span class="mf">5.000000</span>   <span class="mf">5.000000</span>
<span class="n">mean</span>   <span class="mf">1.000000</span>      <span class="mf">0.200000</span>   <span class="mf">4.400000</span>
<span class="n">std</span>    <span class="mf">1.224745</span>      <span class="mf">0.074136</span>   <span class="mf">3.847077</span>
<span class="nb">min</span>    <span class="mf">0.000000</span>      <span class="mf">0.110672</span>   <span class="mf">0.000000</span>
<span class="mi">25</span><span class="o">%</span>    <span class="mf">0.000000</span>      <span class="mf">0.142292</span>   <span class="mf">2.000000</span>
<span class="mi">50</span><span class="o">%</span>    <span class="mf">1.000000</span>      <span class="mf">0.205534</span>   <span class="mf">4.000000</span>
<span class="mi">75</span><span class="o">%</span>    <span class="mf">1.000000</span>      <span class="mf">0.252964</span>   <span class="mf">6.000000</span>
<span class="nb">max</span>    <span class="mf">3.000000</span>      <span class="mf">0.288538</span>  <span class="mf">10.000000</span>
</pre></div>
</div>
<p>We first need to reassign the data type of the <code class="docutils literal"><span class="pre">string</span></code> column. We then
rename the column and print summary statistics.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Transform strings into floats, i.e., words into numbers</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

<span class="c1"># Rename the column</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;string&#39;</span><span class="p">:</span> <span class="s1">&#39;salary&#39;</span><span class="p">})</span>

<span class="c1"># Print summary statistics</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>       <span class="n">position</span>  <span class="n">relFrequency</span>       <span class="n">team</span>      <span class="n">salary</span>
<span class="n">count</span>  <span class="mf">5.000000</span>      <span class="mf">5.000000</span>   <span class="mf">5.000000</span>    <span class="mf">6.000000</span>
<span class="n">mean</span>   <span class="mf">1.000000</span>      <span class="mf">0.200000</span>   <span class="mf">4.400000</span>   <span class="mf">48.666667</span>
<span class="n">std</span>    <span class="mf">1.224745</span>      <span class="mf">0.074136</span>   <span class="mf">3.847077</span>   <span class="mf">75.743427</span>
<span class="nb">min</span>    <span class="mf">0.000000</span>      <span class="mf">0.110672</span>   <span class="mf">0.000000</span>    <span class="mf">2.000000</span>
<span class="mi">25</span><span class="o">%</span>    <span class="mf">0.000000</span>      <span class="mf">0.142292</span>   <span class="mf">2.000000</span>    <span class="mf">7.000000</span>
<span class="mi">50</span><span class="o">%</span>    <span class="mf">1.000000</span>      <span class="mf">0.205534</span>   <span class="mf">4.000000</span>   <span class="mf">22.000000</span>
<span class="mi">75</span><span class="o">%</span>    <span class="mf">1.000000</span>      <span class="mf">0.252964</span>   <span class="mf">6.000000</span>   <span class="mf">38.500000</span>
<span class="nb">max</span>    <span class="mf">3.000000</span>      <span class="mf">0.288538</span>  <span class="mf">10.000000</span>  <span class="mf">200.000000</span>
</pre></div>
</div>
</div>
<div class="section" id="replacing-values-in-a-dataframe-conditional-on-criteria">
<h3>Replacing values in a DataFrame conditional on criteria<a class="headerlink" href="#replacing-values-in-a-dataframe-conditional-on-criteria" title="Permalink to this headline">¶</a></h3>
<p>If we need to replace values in a <strong>DataFrame</strong> based on certain criteria it is
often more efficient to use <strong>indexing</strong> as opposed to loops. Let us first
create a DataFrame with some random values:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>           <span class="mi">0</span>          <span class="mi">1</span>          <span class="mi">2</span>          <span class="mi">3</span>          <span class="mi">4</span>
<span class="mi">0</span>   <span class="mf">5.964016</span>  <span class="mf">65.099692</span>   <span class="mf">2.604514</span>  <span class="mf">27.413797</span>  <span class="mf">46.420845</span>
<span class="mi">1</span>  <span class="mf">82.723986</span>  <span class="mf">70.756959</span>  <span class="mf">31.697136</span>  <span class="mf">27.963670</span>  <span class="mf">38.688859</span>
<span class="mi">2</span>   <span class="mf">8.138214</span>  <span class="mf">31.956749</span>  <span class="mf">17.797434</span>  <span class="mf">24.692932</span>  <span class="mf">13.191135</span>
<span class="mi">3</span>  <span class="mf">93.073017</span>  <span class="mf">34.759564</span>  <span class="mf">83.609647</span>  <span class="mf">33.406344</span>  <span class="mf">68.554443</span>
<span class="mi">4</span>  <span class="mf">93.582556</span>   <span class="mf">9.808928</span>  <span class="mf">18.585683</span>  <span class="mf">49.850321</span>  <span class="mf">84.468746</span>
<span class="mi">5</span>  <span class="mf">35.194378</span>   <span class="mf">8.149723</span>  <span class="mf">22.791774</span>  <span class="mf">77.412394</span>   <span class="mf">8.300174</span>
<span class="mi">6</span>  <span class="mf">78.389353</span>  <span class="mf">73.610111</span>  <span class="mf">88.914548</span>   <span class="mf">2.292844</span>  <span class="mf">44.233570</span>
<span class="mi">7</span>  <span class="mf">18.151162</span>   <span class="mf">1.696217</span>  <span class="mf">36.552867</span>  <span class="mf">94.816007</span>  <span class="mf">45.594009</span>
<span class="mi">8</span>  <span class="mf">15.146534</span>  <span class="mf">36.671286</span>  <span class="mf">27.829229</span>  <span class="mf">13.903670</span>  <span class="mf">85.953901</span>
<span class="mi">9</span>  <span class="mf">58.472523</span>  <span class="mf">62.087970</span>  <span class="mf">57.742129</span>   <span class="mf">8.962014</span>  <span class="mf">96.047687</span>
</pre></div>
</div>
<p>We next replace all the values in column <code class="docutils literal"><span class="pre">2</span></code> that are smaller than 30 with
the string <cite>low</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="p">[</span><span class="mi">1</span><span class="p">][(</span><span class="n">df1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">30</span><span class="p">)]</span> <span class="o">=</span> <span class="s1">&#39;Low&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">df1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>           <span class="mi">0</span>         <span class="mi">1</span>          <span class="mi">2</span>          <span class="mi">3</span>          <span class="mi">4</span>
<span class="mi">0</span>   <span class="mf">5.964016</span>  <span class="mf">65.09969</span>   <span class="mf">2.604514</span>  <span class="mf">27.413797</span>  <span class="mf">46.420845</span>
<span class="mi">1</span>  <span class="mf">82.723986</span>  <span class="mf">70.75696</span>  <span class="mf">31.697136</span>  <span class="mf">27.963670</span>  <span class="mf">38.688859</span>
<span class="mi">2</span>   <span class="mf">8.138214</span>  <span class="mf">31.95675</span>  <span class="mf">17.797434</span>  <span class="mf">24.692932</span>  <span class="mf">13.191135</span>
<span class="mi">3</span>  <span class="mf">93.073017</span>  <span class="mf">34.75956</span>  <span class="mf">83.609647</span>  <span class="mf">33.406344</span>  <span class="mf">68.554443</span>
<span class="mi">4</span>  <span class="mf">93.582556</span>       <span class="n">Low</span>  <span class="mf">18.585683</span>  <span class="mf">49.850321</span>  <span class="mf">84.468746</span>
<span class="mi">5</span>  <span class="mf">35.194378</span>       <span class="n">Low</span>  <span class="mf">22.791774</span>  <span class="mf">77.412394</span>   <span class="mf">8.300174</span>
<span class="mi">6</span>  <span class="mf">78.389353</span>  <span class="mf">73.61011</span>  <span class="mf">88.914548</span>   <span class="mf">2.292844</span>  <span class="mf">44.233570</span>
<span class="mi">7</span>  <span class="mf">18.151162</span>       <span class="n">Low</span>  <span class="mf">36.552867</span>  <span class="mf">94.816007</span>  <span class="mf">45.594009</span>
<span class="mi">8</span>  <span class="mf">15.146534</span>  <span class="mf">36.67129</span>  <span class="mf">27.829229</span>  <span class="mf">13.903670</span>  <span class="mf">85.953901</span>
<span class="mi">9</span>  <span class="mf">58.472523</span>  <span class="mf">62.08797</span>  <span class="mf">57.742129</span>   <span class="mf">8.962014</span>  <span class="mf">96.047687</span>
</pre></div>
</div>
<p>We next replace all the values of column <code class="docutils literal"><span class="pre">4</span></code> that are larger than 70 with the
value 1000.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="p">[</span><span class="mi">3</span><span class="p">][(</span><span class="n">df1</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">70</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="k">print</span><span class="p">(</span><span class="n">df1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>           <span class="mi">0</span>         <span class="mi">1</span>          <span class="mi">2</span>            <span class="mi">3</span>          <span class="mi">4</span>
<span class="mi">0</span>   <span class="mf">5.964016</span>  <span class="mf">65.09969</span>   <span class="mf">2.604514</span>    <span class="mf">27.413797</span>  <span class="mf">46.420845</span>
<span class="mi">1</span>  <span class="mf">82.723986</span>  <span class="mf">70.75696</span>  <span class="mf">31.697136</span>    <span class="mf">27.963670</span>  <span class="mf">38.688859</span>
<span class="mi">2</span>   <span class="mf">8.138214</span>  <span class="mf">31.95675</span>  <span class="mf">17.797434</span>    <span class="mf">24.692932</span>  <span class="mf">13.191135</span>
<span class="mi">3</span>  <span class="mf">93.073017</span>  <span class="mf">34.75956</span>  <span class="mf">83.609647</span>    <span class="mf">33.406344</span>  <span class="mf">68.554443</span>
<span class="mi">4</span>  <span class="mf">93.582556</span>       <span class="n">Low</span>  <span class="mf">18.585683</span>    <span class="mf">49.850321</span>  <span class="mf">84.468746</span>
<span class="mi">5</span>  <span class="mf">35.194378</span>       <span class="n">Low</span>  <span class="mf">22.791774</span>  <span class="mf">1000.000000</span>   <span class="mf">8.300174</span>
<span class="mi">6</span>  <span class="mf">78.389353</span>  <span class="mf">73.61011</span>  <span class="mf">88.914548</span>     <span class="mf">2.292844</span>  <span class="mf">44.233570</span>
<span class="mi">7</span>  <span class="mf">18.151162</span>       <span class="n">Low</span>  <span class="mf">36.552867</span>  <span class="mf">1000.000000</span>  <span class="mf">45.594009</span>
<span class="mi">8</span>  <span class="mf">15.146534</span>  <span class="mf">36.67129</span>  <span class="mf">27.829229</span>    <span class="mf">13.903670</span>  <span class="mf">85.953901</span>
<span class="mi">9</span>  <span class="mf">58.472523</span>  <span class="mf">62.08797</span>  <span class="mf">57.742129</span>     <span class="mf">8.962014</span>  <span class="mf">96.047687</span>
</pre></div>
</div>
<p>And finally we can combine logical statements and replace values on a
combination of conditions. So let’s replace all the values in column <code class="docutils literal"><span class="pre">5</span></code> that
are between 20 and 80 with the string <cite>middle</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="p">[</span><span class="mi">4</span><span class="p">][(</span><span class="n">df1</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">20</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df1</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">80</span><span class="p">)]</span> <span class="o">=</span> <span class="s1">&#39;Middle&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">df1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>           <span class="mi">0</span>         <span class="mi">1</span>          <span class="mi">2</span>            <span class="mi">3</span>         <span class="mi">4</span>
<span class="mi">0</span>   <span class="mf">5.964016</span>  <span class="mf">65.09969</span>   <span class="mf">2.604514</span>    <span class="mf">27.413797</span>    <span class="n">Middle</span>
<span class="mi">1</span>  <span class="mf">82.723986</span>  <span class="mf">70.75696</span>  <span class="mf">31.697136</span>    <span class="mf">27.963670</span>    <span class="n">Middle</span>
<span class="mi">2</span>   <span class="mf">8.138214</span>  <span class="mf">31.95675</span>  <span class="mf">17.797434</span>    <span class="mf">24.692932</span>  <span class="mf">13.19114</span>
<span class="mi">3</span>  <span class="mf">93.073017</span>  <span class="mf">34.75956</span>  <span class="mf">83.609647</span>    <span class="mf">33.406344</span>    <span class="n">Middle</span>
<span class="mi">4</span>  <span class="mf">93.582556</span>       <span class="n">Low</span>  <span class="mf">18.585683</span>    <span class="mf">49.850321</span>  <span class="mf">84.46875</span>
<span class="mi">5</span>  <span class="mf">35.194378</span>       <span class="n">Low</span>  <span class="mf">22.791774</span>  <span class="mf">1000.000000</span>  <span class="mf">8.300174</span>
<span class="mi">6</span>  <span class="mf">78.389353</span>  <span class="mf">73.61011</span>  <span class="mf">88.914548</span>     <span class="mf">2.292844</span>    <span class="n">Middle</span>
<span class="mi">7</span>  <span class="mf">18.151162</span>       <span class="n">Low</span>  <span class="mf">36.552867</span>  <span class="mf">1000.000000</span>    <span class="n">Middle</span>
<span class="mi">8</span>  <span class="mf">15.146534</span>  <span class="mf">36.67129</span>  <span class="mf">27.829229</span>    <span class="mf">13.903670</span>   <span class="mf">85.9539</span>
<span class="mi">9</span>  <span class="mf">58.472523</span>  <span class="mf">62.08797</span>  <span class="mf">57.742129</span>     <span class="mf">8.962014</span>  <span class="mf">96.04769</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="making-simple-graphs-from-our-data">
<h2>Making simple graphs from our data<a class="headerlink" href="#making-simple-graphs-from-our-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bar-chart">
<h3>Bar chart<a class="headerlink" href="#bar-chart" title="Permalink to this headline">¶</a></h3>
<p>We first make a bar chart of the absolute frequencies.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1">#</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="mf">1.</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xv</span><span class="p">)),</span> <span class="n">xv</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="c1"># Annotate with text</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="mf">1.</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xv</span><span class="p">)))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">xv</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">val</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
<span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;%&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Relative Frequency Barchart&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1"># We can also save this graph as a pdf</span>
<span class="c1">#savefig(&#39;./Graphs/fig1.pdf&#39;)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/Slides_Data_Barchart_1.png"><img alt="_images/Slides_Data_Barchart_1.png" src="_images/Slides_Data_Barchart_1.png" style="width: 12cm;" /></a>
<p>This simple command plots the barchart into a window and saves it as
<strong>fig1.pdf</strong> into a subfolder called <code class="docutils literal"><span class="pre">Graphs</span></code>. Don’t forget to first make
this subfolder, otherwise <code class="docutils literal"><span class="pre">Python</span></code> will throw an error when it can’t find the
folder.</p>
</div>
<div class="section" id="pie-chart">
<h3>Pie chart<a class="headerlink" href="#pie-chart" title="Permalink to this headline">¶</a></h3>
<p>We next make a pie chart using the relative frequencies stored in vector <code class="docutils literal"><span class="pre">xv</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">xv</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">xv</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="n">shadow</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c1"># Annotate with text</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Relative Frequency Pie Chart&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/Slides_Data_Piechart_1.png"><img alt="_images/Slides_Data_Piechart_1.png" src="_images/Slides_Data_Piechart_1.png" style="width: 12cm;" /></a>
</div>
<div class="section" id="histogram">
<h3>Histogram<a class="headerlink" href="#histogram" title="Permalink to this headline">¶</a></h3>
<p>Next we use a new data file called
<a class="reference download internal" href="_downloads/Lecture_Data_Excel_b.csv" download=""><code class="xref download docutils literal"><span class="pre">Lecture_Data_Excel_b.csv</span></code></a>.
This data file contains data on height age and other variables. We first make a histogram of
the continuous variable Height.
The actual command for the histogram is <code class="docutils literal"><span class="pre">hist</span></code>. It returns three variables
<code class="docutils literal"><span class="pre">prob</span></code>, <code class="docutils literal"><span class="pre">bins</span></code>, and <code class="docutils literal"><span class="pre">patches</span></code>. We use them in the following to add
information to the histogram.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filepath</span> <span class="o">+</span> <span class="s1">&#39;Lecture_Data_Excel_b.csv&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Response&#39;</span> <span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="n">Height</span>  <span class="n">AverageMathSAT</span>  <span class="n">Age</span>  <span class="n">Female</span>  <span class="n">Education</span>  <span class="n">Race</span>
<span class="mi">0</span>     <span class="mf">1.1</span>             <span class="mi">370</span>   <span class="mi">20</span>       <span class="mi">0</span>          <span class="mi">2</span>  <span class="n">Hisp</span>
<span class="mi">1</span>     <span class="mf">1.2</span>             <span class="mi">393</span>   <span class="mi">20</span>       <span class="mi">0</span>          <span class="mi">4</span>   <span class="n">Wht</span>
<span class="mi">2</span>     <span class="mf">1.3</span>             <span class="mi">413</span>   <span class="mi">20</span>       <span class="mi">0</span>          <span class="mi">4</span>   <span class="n">Blk</span>
<span class="mi">3</span>     <span class="mf">1.4</span>             <span class="mi">430</span>   <span class="mi">20</span>       <span class="mi">0</span>          <span class="mi">4</span>   <span class="n">Wht</span>
<span class="mi">4</span>     <span class="mf">1.5</span>             <span class="mi">440</span>   <span class="mi">20</span>       <span class="mi">0</span>          <span class="mi">2</span>   <span class="n">Mex</span>
</pre></div>
</div>
<p>We next plot a series of histograms.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">heightv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Height&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># Initialize</span>
<span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">heightv</span><span class="p">)</span> <span class="c1"># number of obs.</span>
<span class="n">B</span> <span class="o">=</span> <span class="mi">8</span>           <span class="c1"># number of bins in histogram</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span> <span class="n">hspace</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">)</span>

<span class="n">prob</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">heightv</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">B</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;mid&#39;</span> <span class="p">)</span>
<span class="c1"># Annotate with text</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">prob</span><span class="p">):</span>
    <span class="n">percent</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">/</span><span class="n">N</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
    <span class="c1"># only annotate non-zero values</span>
    <span class="k">if</span> <span class="n">percent</span><span class="p">:</span>
        <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">bins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">p</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">percent</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;%&#39;</span><span class="p">,</span>
<span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Height groups&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of obs&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Histogram of Height&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">heightv</span><span class="p">),</span><span class="nb">max</span><span class="p">(</span><span class="n">heightv</span><span class="p">))</span>

<span class="c1"># Using Panda&#39;s built in histogram method</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Height&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span> <span class="o">=</span> <span class="n">B</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Histogram of Height&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Height groups&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of obs&#39;</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;AverageMathSAT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span> <span class="o">=</span> <span class="n">B</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span>
<span class="mf">0.3</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Histogram of Math SAT Scores&#39;</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/Slides_Data_Histogram_1.png"><img alt="_images/Slides_Data_Histogram_1.png" src="_images/Slides_Data_Histogram_1.png" style="width: 12cm;" /></a>
<p>Another way to graph a histogram is by using the powerful <code class="docutils literal"><span class="pre">ggplot</span></code> package
which is a translation of <strong>R’s</strong> <a class="reference external" href="http://ggplot2.org/">ggplot2</a> package into <strong>Python</strong>. It
follows a completely different graphing philosophy based on the <strong>grammar of
grapics</strong> by:</p>
<blockquote>
<div>Hadley Wickham. A layered grammar of graphics.
Journal of Computational and Graphical Statistics, vol. 19, no. 1, pp. 3–28, 2010.</div></blockquote>
<p>Or using the ggplot package</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span> <span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">),</span> <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">)</span> <span class="o">+</span> <span class="n">geom_histogram</span><span class="p">()</span> <span class="o">+</span>
<span class="n">ggtitle</span><span class="p">(</span><span class="s2">&quot;Histogram of Height using ggplot&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">labs</span><span class="p">(</span><span class="s2">&quot;Height&quot;</span><span class="p">,</span> <span class="s2">&quot;Freq&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ggplot</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">9223372036845724149</span><span class="p">)</span><span class="o">&gt;</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/Slides_Data_Boxplot_1.png"><img alt="_images/Slides_Data_Boxplot_1.png" src="_images/Slides_Data_Boxplot_1.png" style="width: 12cm;" /></a>
</div>
<div class="section" id="boxplots">
<h3>Boxplots<a class="headerlink" href="#boxplots" title="Permalink to this headline">¶</a></h3>
<p>A boxplot of height is made as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">heightv</span><span class="p">)</span>
<span class="c1"># Annotate with text</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Boxplot of Height&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/Slides_Data_Boxplot_1.png"><img alt="_images/Slides_Data_Boxplot_1.png" src="_images/Slides_Data_Boxplot_1.png" style="width: 12cm;" /></a>
</div>
</div>
<div class="section" id="summary-statistics">
<h2>Summary statistics<a class="headerlink" href="#summary-statistics" title="Permalink to this headline">¶</a></h2>
<p>We next go through some basic summary statistics.</p>
<div class="section" id="measures-of-central-tendency">
<h3>Measures of central tendency<a class="headerlink" href="#measures-of-central-tendency" title="Permalink to this headline">¶</a></h3>
<p>A quick way to produce summary statistics of our data set is to use <code class="docutils literal"><span class="pre">panda's</span></code>
command <code class="docutils literal"><span class="pre">describe</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>          <span class="n">Height</span>  <span class="n">AverageMathSAT</span>        <span class="n">Age</span>     <span class="n">Female</span>  <span class="n">Education</span>
<span class="n">count</span>  <span class="mf">60.000000</span>       <span class="mf">60.000000</span>  <span class="mf">60.000000</span>  <span class="mf">60.000000</span>  <span class="mf">60.000000</span>
<span class="n">mean</span>    <span class="mf">6.816667</span>      <span class="mf">493.666667</span>  <span class="mf">20.933333</span>   <span class="mf">0.333333</span>   <span class="mf">3.016667</span>
<span class="n">std</span>     <span class="mf">3.571743</span>       <span class="mf">34.018274</span>   <span class="mf">1.176992</span>   <span class="mf">0.475383</span>   <span class="mf">1.096863</span>
<span class="nb">min</span>     <span class="mf">1.100000</span>      <span class="mf">370.000000</span>  <span class="mf">20.000000</span>   <span class="mf">0.000000</span>   <span class="mf">1.000000</span>
<span class="mi">25</span><span class="o">%</span>     <span class="mf">3.950000</span>      <span class="mf">478.500000</span>  <span class="mf">20.000000</span>   <span class="mf">0.000000</span>   <span class="mf">2.000000</span>
<span class="mi">50</span><span class="o">%</span>     <span class="mf">6.850000</span>      <span class="mf">507.000000</span>  <span class="mf">20.000000</span>   <span class="mf">0.000000</span>   <span class="mf">3.000000</span>
<span class="mi">75</span><span class="o">%</span>     <span class="mf">9.650000</span>      <span class="mf">509.250000</span>  <span class="mf">22.000000</span>   <span class="mf">1.000000</span>   <span class="mf">4.000000</span>
<span class="nb">max</span>    <span class="mf">12.700000</span>      <span class="mf">542.000000</span>  <span class="mf">23.000000</span>   <span class="mf">1.000000</span>   <span class="mf">5.000000</span>
</pre></div>
</div>
<p>Or we can produce the same statistics by hand. We first calculate the mean,
median and mode. Note that <code class="docutils literal"><span class="pre">mode</span></code> is part of the <code class="docutils literal"><span class="pre">stats</span></code> package which was
imported as <code class="docutils literal"><span class="pre">st</span></code> using: <code class="docutils literal"><span class="pre">from</span> <span class="pre">scipy</span> <span class="pre">import</span> <span class="pre">stats</span> <span class="pre">as</span> <span class="pre">st</span></code>. Now we have to add
<code class="docutils literal"><span class="pre">st</span></code> to the mode command: <code class="docutils literal"><span class="pre">st.mode(heightv)</span></code> in order to call it. The other
commands are part of the <code class="docutils literal"><span class="pre">numpy</span></code> package so they have the prefix <code class="docutils literal"><span class="pre">np.</span></code></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Number of observations (sample size)</span>
<span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">heightv</span><span class="p">)</span>

<span class="c1"># Mean - Median - Mode</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Mean(height)=  {:.3f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">heightv</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Median(height)=  {:.3f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">heightv</span><span class="p">)))</span>

<span class="c1"># Mode (value with highest frequency)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Mode(height)=  {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">mode</span><span class="p">(</span><span class="n">heightv</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Mean</span><span class="p">(</span><span class="n">height</span><span class="p">)</span><span class="o">=</span>  <span class="mf">6.817</span>
<span class="n">Median</span><span class="p">(</span><span class="n">height</span><span class="p">)</span><span class="o">=</span>  <span class="mf">6.850</span>
<span class="n">Mode</span><span class="p">(</span><span class="n">height</span><span class="p">)</span><span class="o">=</span>  <span class="p">(</span><span class="n">array</span><span class="p">([</span> <span class="mf">1.1</span><span class="p">]),</span> <span class="n">array</span><span class="p">([</span> <span class="mf">1.</span><span class="p">]))</span>
</pre></div>
</div>
<p>We can also just summarize a variable using the <code class="docutils literal"><span class="pre">st.describe</span></code> command from
the <code class="docutils literal"><span class="pre">stats</span></code> package.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Summary stats</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Summary Stats&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;-------------&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">heightv</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Summary</span> <span class="n">Stats</span>
<span class="o">-------------</span>
<span class="n">DescribeResult</span><span class="p">(</span><span class="n">nobs</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">minmax</span><span class="o">=</span><span class="p">(</span><span class="mf">1.1000000000000001</span><span class="p">,</span>
<span class="mf">12.699999999999999</span><span class="p">),</span> <span class="n">mean</span><span class="o">=</span><span class="mf">6.8166666666666655</span><span class="p">,</span>
<span class="n">variance</span><span class="o">=</span><span class="mf">12.757344632768362</span><span class="p">,</span> <span class="n">skewness</span><span class="o">=</span><span class="mf">0.01909961978127301</span><span class="p">,</span>
<span class="n">kurtosis</span><span class="o">=-</span><span class="mf">1.1611486008105545</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="measures-of-dispersion">
<h3>Measures of dispersion<a class="headerlink" href="#measures-of-dispersion" title="Permalink to this headline">¶</a></h3>
<p>We now calculate the range, variance and standard deviations. Remember that for
variance and standard deviation there is a distinction between population and
sample.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># returns smallest a largest element</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Range = {:.3f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">heightv</span><span class="p">)</span><span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="n">heightv</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Population variance = {:.3f}&quot;</span><span class="o">.</span>\

<span class="c1"># population variance</span>
  <span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">heightv</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">heightv</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="n">N</span><span class="p">))</span>

<span class="c1"># sample variance</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Sample variance     = {:.3f}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">heightv</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">heightv</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Pop.   standard dev = {:.3f}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">heightv</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">heightv</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="n">N</span><span class="p">)))</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Sample standard dev = {:.3f}&quot;</span><span class="o">.</span> \
  <span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">heightv</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">heightv</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">))))</span>

<span class="c1">#Or simply</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Pop.   standard dev = {:.3f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">heightv</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Range</span> <span class="o">=</span> <span class="mf">11.600</span>
<span class="n">Population</span> <span class="n">variance</span> <span class="o">=</span> <span class="mf">12.545</span>
<span class="n">Sample</span> <span class="n">variance</span>     <span class="o">=</span> <span class="mf">12.757</span>
<span class="n">Pop</span><span class="o">.</span>   <span class="n">standard</span> <span class="n">dev</span> <span class="o">=</span> <span class="mf">3.542</span>
<span class="n">Sample</span> <span class="n">standard</span> <span class="n">dev</span> <span class="o">=</span> <span class="mf">3.572</span>
<span class="n">Pop</span><span class="o">.</span>   <span class="n">standard</span> <span class="n">dev</span> <span class="o">=</span> <span class="mf">3.542</span>
</pre></div>
</div>
</div>
<div class="section" id="measures-of-relative-standing">
<h3>Measures of relative standing<a class="headerlink" href="#measures-of-relative-standing" title="Permalink to this headline">¶</a></h3>
<p>Percentiles are calculated as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;1 quartile (25th percentile) = {:.3f}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">scoreatpercentile</span><span class="p">(</span><span class="n">heightv</span><span class="p">,</span> <span class="mi">25</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;2 quartile (50th percentile) = {:.3f}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">scoreatpercentile</span><span class="p">(</span><span class="n">heightv</span><span class="p">,</span> <span class="mi">50</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;3 quartile (75th percentile) = {:.3f}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">scoreatpercentile</span><span class="p">(</span><span class="n">heightv</span><span class="p">,</span> <span class="mi">75</span><span class="p">)))</span>

<span class="c1"># Inter quartile rante: Q3-Q1 or P_75-P_25</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;IQR = P75 - P25              = {:.3f}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">scoreatpercentile</span><span class="p">(</span><span class="n">heightv</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>\
  <span class="o">-</span><span class="n">st</span><span class="o">.</span><span class="n">scoreatpercentile</span><span class="p">(</span><span class="n">heightv</span><span class="p">,</span> <span class="mi">25</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="n">quartile</span> <span class="p">(</span><span class="mi">25</span><span class="n">th</span> <span class="n">percentile</span><span class="p">)</span> <span class="o">=</span> <span class="mf">3.950</span>
<span class="mi">2</span> <span class="n">quartile</span> <span class="p">(</span><span class="mi">50</span><span class="n">th</span> <span class="n">percentile</span><span class="p">)</span> <span class="o">=</span> <span class="mf">6.850</span>
<span class="mi">3</span> <span class="n">quartile</span> <span class="p">(</span><span class="mi">75</span><span class="n">th</span> <span class="n">percentile</span><span class="p">)</span> <span class="o">=</span> <span class="mf">9.650</span>
<span class="n">IQR</span> <span class="o">=</span> <span class="n">P75</span> <span class="o">-</span> <span class="n">P25</span>              <span class="o">=</span> <span class="mf">5.700</span>
</pre></div>
</div>
</div>
<div class="section" id="data-aggregation-or-summary-statistics-by-subgroup">
<h3>Data aggregation or summary statistics by subgroup<a class="headerlink" href="#data-aggregation-or-summary-statistics-by-subgroup" title="Permalink to this headline">¶</a></h3>
<p>We next want to summarize the data by subgroup. Let’s assume that we would like
to compare the average <code class="docutils literal"><span class="pre">Height</span></code> by <code class="docutils literal"><span class="pre">Race</span></code>. We can use the <code class="docutils literal"><span class="pre">groupby()</span></code> to
accomplish this.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">groupRace</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Race&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Summary by Race&#39;</span><span class="p">,</span> <span class="n">groupRace</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Summary</span> <span class="n">by</span> <span class="n">Race</span>         <span class="n">Height</span>  <span class="n">AverageMathSAT</span>        <span class="n">Age</span>    <span class="n">Female</span>
<span class="n">Education</span>
<span class="n">Race</span>
<span class="n">Blk</span>   <span class="mf">6.278261</span>      <span class="mf">491.652174</span>  <span class="mf">20.826087</span>  <span class="mf">0.304348</span>   <span class="mf">3.565217</span>
<span class="n">Hisp</span>  <span class="mf">6.525000</span>      <span class="mf">472.750000</span>  <span class="mf">21.500000</span>  <span class="mf">0.250000</span>   <span class="mf">1.750000</span>
<span class="n">Mex</span>   <span class="mf">6.171429</span>      <span class="mf">491.571429</span>  <span class="mf">20.928571</span>  <span class="mf">0.285714</span>   <span class="mf">2.428571</span>
<span class="n">Oth</span>   <span class="mf">8.750000</span>      <span class="mf">516.000000</span>  <span class="mf">21.000000</span>  <span class="mf">0.500000</span>   <span class="mf">2.500000</span>
<span class="n">Wht</span>   <span class="mf">7.917647</span>      <span class="mf">500.411765</span>  <span class="mf">20.941176</span>  <span class="mf">0.411765</span>   <span class="mf">3.117647</span>
</pre></div>
</div>
<p>We could also use a different category like gender.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">groupGender</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Female&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Summary by Gender&#39;</span><span class="p">,</span> <span class="n">groupGender</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Summary</span> <span class="n">by</span> <span class="n">Gender</span>         <span class="n">Height</span>  <span class="n">AverageMathSAT</span>   <span class="n">Age</span>  <span class="n">Education</span>
<span class="n">Female</span>
<span class="mi">0</span>        <span class="mf">4.765</span>           <span class="mf">479.7</span>  <span class="mf">21.4</span>       <span class="mf">2.95</span>
<span class="mi">1</span>       <span class="mf">10.920</span>           <span class="mf">521.6</span>  <span class="mf">20.0</span>       <span class="mf">3.15</span>
</pre></div>
</div>
<p>Or we can also combine the two or more categories and summarize the data as
follows.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">groupRaceGender</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Race&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Summary by Race and Gender&#39;</span><span class="p">,</span> <span class="n">groupRaceGender</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Summary</span> <span class="n">by</span> <span class="n">Race</span> <span class="ow">and</span> <span class="n">Gender</span>                 <span class="n">Height</span>  <span class="n">AverageMathSAT</span>
<span class="n">Age</span>  <span class="n">Education</span>
<span class="n">Race</span> <span class="n">Female</span>
<span class="n">Blk</span>  <span class="mi">0</span>        <span class="mf">4.350000</span>      <span class="mf">479.562500</span>  <span class="mf">21.1875</span>   <span class="mf">3.562500</span>
     <span class="mi">1</span>       <span class="mf">10.685714</span>      <span class="mf">519.285714</span>  <span class="mf">20.0000</span>   <span class="mf">3.571429</span>
<span class="n">Hisp</span> <span class="mi">0</span>        <span class="mf">5.600000</span>      <span class="mf">461.333333</span>  <span class="mf">22.0000</span>   <span class="mf">1.666667</span>
     <span class="mi">1</span>        <span class="mf">9.300000</span>      <span class="mf">507.000000</span>  <span class="mf">20.0000</span>   <span class="mf">2.000000</span>
<span class="n">Mex</span>  <span class="mi">0</span>        <span class="mf">4.480000</span>      <span class="mf">481.900000</span>  <span class="mf">21.3000</span>   <span class="mf">2.100000</span>
     <span class="mi">1</span>       <span class="mf">10.400000</span>      <span class="mf">515.750000</span>  <span class="mf">20.0000</span>   <span class="mf">3.250000</span>
<span class="n">Oth</span>  <span class="mi">0</span>        <span class="mf">6.300000</span>      <span class="mf">506.000000</span>  <span class="mf">22.0000</span>   <span class="mf">1.000000</span>
     <span class="mi">1</span>       <span class="mf">11.200000</span>      <span class="mf">526.000000</span>  <span class="mf">20.0000</span>   <span class="mf">4.000000</span>
<span class="n">Wht</span>  <span class="mi">0</span>        <span class="mf">5.310000</span>      <span class="mf">480.600000</span>  <span class="mf">21.6000</span>   <span class="mf">3.400000</span>
     <span class="mi">1</span>       <span class="mf">11.642857</span>      <span class="mf">528.714286</span>  <span class="mf">20.0000</span>   <span class="mf">2.714286</span>
</pre></div>
</div>
<p>Be careful and don’t forget to add the various categories in a list using the
brackets <code class="docutils literal"><span class="pre">[...]]</span></code>.</p>
</div>
</div>
<div class="section" id="measures-of-linear-relationship">
<h2>Measures of linear relationship<a class="headerlink" href="#measures-of-linear-relationship" title="Permalink to this headline">¶</a></h2>
<div class="section" id="covariance">
<h3>Covariance<a class="headerlink" href="#covariance" title="Permalink to this headline">¶</a></h3>
<p>We first grab two variables <code class="docutils literal"><span class="pre">heightv</span></code> and <code class="docutils literal"><span class="pre">agev</span></code> from the dataframe and
define them as <code class="docutils literal"><span class="pre">numpy</span></code> arrays.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">xv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">yv</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Height&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">xv</span><span class="p">)</span>
</pre></div>
</div>
<p>We then go ahead and calculate the covariance.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Population covariance</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Population covariance = {:.3f}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">xv</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">xv</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">yv</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">yv</span><span class="p">)))</span><span class="o">/</span><span class="n">n</span><span class="p">))</span>

<span class="c1"># Sample covariance</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Sample covariance     = {:.3f}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">xv</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">xv</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">yv</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">yv</span><span class="p">)))</span><span class="o">/</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>

<span class="c1"># or simply</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Sample covariance     = {:.3f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Age</span><span class="o">.</span><span class="n">cov</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Height</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Population</span> <span class="n">covariance</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.159</span>
<span class="n">Sample</span> <span class="n">covariance</span>     <span class="o">=</span> <span class="o">-</span><span class="mf">0.162</span>
<span class="n">Sample</span> <span class="n">covariance</span>     <span class="o">=</span> <span class="o">-</span><span class="mf">0.162</span>
</pre></div>
</div>
</div>
<div class="section" id="correlation-coefficient">
<h3>Correlation coefficient<a class="headerlink" href="#correlation-coefficient" title="Permalink to this headline">¶</a></h3>
<p>We can calculate the correlation coefficient by hand or using the <code class="docutils literal"><span class="pre">pandas</span></code>
toolbox command.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Correlation coefficient =  {:.3f}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">xv</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">xv</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">yv</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">yv</span><span class="p">)))</span><span class="o">/</span><span class="n">n</span><span class="p">)</span>\
  <span class="o">/</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">xv</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">yv</span><span class="p">))))</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Correlation coefficient =</span>
<span class="p">{:</span><span class="o">.</span><span class="mi">3</span><span class="n">f</span><span class="p">}</span><span class="s2">&quot;.format(df.Age.corr(df.Height)))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Correlation</span> <span class="n">coefficient</span> <span class="o">=</span>  <span class="o">-</span><span class="mf">0.038</span>
<span class="n">Correlation</span> <span class="n">coefficient</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.038</span>
</pre></div>
</div>
</div>
<div class="section" id="regression-line">
<h3>Regression line<a class="headerlink" href="#regression-line" title="Permalink to this headline">¶</a></h3>
<p><strong>Example 1: Simple example</strong></p>
<p>We first generate some data. A variable <code class="docutils literal"><span class="pre">x</span></code> and a variable <code class="docutils literal"><span class="pre">y</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Define data. 2 vectors xv and yv</span>
<span class="n">xv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">yv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">15</span><span class="p">])</span>
</pre></div>
</div>
<p>We then “cast” these into a <code class="docutils literal"><span class="pre">pandas</span></code> DataFrame.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Define data frame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">xv</span><span class="p">,</span> <span class="n">yv</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>We fist make a <strong>scatterplot</strong> with least squares trend line: <cite>y = beta_0 +
beta_1 * x + epsilon</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">xv</span><span class="p">,</span> <span class="n">yv</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;p = {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>

<span class="c1"># Scatterplot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Linear regression with polyfit()&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xv</span><span class="p">,</span> <span class="n">yv</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xv</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">xv</span><span class="p">),</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Linear regression&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Data&#39;</span><span class="p">,</span> <span class="s1">&#39;OLS&#39;</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1.77380952</span>  <span class="mf">1.89285714</span><span class="p">]</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/Slides_Data_Scatter1_1.png"><img alt="_images/Slides_Data_Scatter1_1.png" src="_images/Slides_Data_Scatter1_1.png" style="width: 12cm;" /></a>
<p>We then run the same regression using a more general method called <code class="docutils literal"><span class="pre">ols</span></code>
which is part of <code class="docutils literal"><span class="pre">pandas</span></code>. When calling the <code class="docutils literal"><span class="pre">ols</span></code> function
you need to add the module name (<code class="docutils literal"><span class="pre">pandas</span></code> was imported as <code class="docutils literal"><span class="pre">pd</span></code>)
in front of it: <code class="docutils literal"><span class="pre">pd.ols()</span></code>. You then define the independent variable <code class="docutils literal"><span class="pre">y</span></code>
and the dependent variables <code class="docutils literal"><span class="pre">x's</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Run OLS regression</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>

<span class="c1"># Show coefficient estimates</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Parameters:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">beta</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">-------------------------</span><span class="n">Summary</span> <span class="n">of</span> <span class="n">Regression</span>
<span class="n">Analysis</span><span class="o">-------------------------</span>

<span class="n">Formula</span><span class="p">:</span> <span class="n">Y</span> <span class="o">~</span> <span class="o">&lt;</span><span class="n">x</span><span class="o">&gt;</span> <span class="o">+</span> <span class="o">&lt;</span><span class="n">intercept</span><span class="o">&gt;</span>

<span class="n">Number</span> <span class="n">of</span> <span class="n">Observations</span><span class="p">:</span>         <span class="mi">8</span>
<span class="n">Number</span> <span class="n">of</span> <span class="n">Degrees</span> <span class="n">of</span> <span class="n">Freedom</span><span class="p">:</span>   <span class="mi">2</span>

<span class="n">R</span><span class="o">-</span><span class="n">squared</span><span class="p">:</span>         <span class="mf">0.6093</span>
<span class="n">Adj</span> <span class="n">R</span><span class="o">-</span><span class="n">squared</span><span class="p">:</span>     <span class="mf">0.5442</span>

<span class="n">Rmse</span><span class="p">:</span>              <span class="mf">3.7578</span>

<span class="n">F</span><span class="o">-</span><span class="n">stat</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>     <span class="mf">9.3583</span><span class="p">,</span> <span class="n">p</span><span class="o">-</span><span class="n">value</span><span class="p">:</span>     <span class="mf">0.0222</span>

<span class="n">Degrees</span> <span class="n">of</span> <span class="n">Freedom</span><span class="p">:</span> <span class="n">model</span> <span class="mi">1</span><span class="p">,</span> <span class="n">resid</span> <span class="mi">6</span>

<span class="o">-----------------------</span><span class="n">Summary</span> <span class="n">of</span> <span class="n">Estimated</span>
<span class="n">Coefficients</span><span class="o">------------------------</span>
      <span class="n">Variable</span>       <span class="n">Coef</span>    <span class="n">Std</span> <span class="n">Err</span>     <span class="n">t</span><span class="o">-</span><span class="n">stat</span>    <span class="n">p</span><span class="o">-</span><span class="n">value</span>    <span class="n">CI</span> <span class="mf">2.5</span><span class="o">%</span>
<span class="n">CI</span> <span class="mf">97.5</span><span class="o">%</span>
<span class="o">--------------------------------------------------------------------------------</span>
             <span class="n">x</span>     <span class="mf">1.7738</span>     <span class="mf">0.5798</span>       <span class="mf">3.06</span>     <span class="mf">0.0222</span>     <span class="mf">0.6373</span>
<span class="mf">2.9103</span>
     <span class="n">intercept</span>     <span class="mf">1.8929</span>     <span class="mf">2.9281</span>       <span class="mf">0.65</span>     <span class="mf">0.5419</span>    <span class="o">-</span><span class="mf">3.8461</span>
<span class="mf">7.6318</span>
<span class="o">---------------------------------</span><span class="n">End</span> <span class="n">of</span>
<span class="n">Summary</span><span class="o">---------------------------------</span>

<span class="n">Parameters</span><span class="p">:</span>
<span class="n">x</span>            <span class="mf">1.773810</span>
<span class="n">intercept</span>    <span class="mf">1.892857</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>
</pre></div>
</div>
<p>Finally, we use the model to make a prediction of <code class="docutils literal"><span class="pre">y</span></code> when <code class="docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">8.5</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Make prediction for x = 8.5</span>
<span class="n">betas</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">beta</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Prediction of y for x = 8.5 is: {:.3f}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">betas</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mf">8.5</span><span class="p">]))))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Prediction</span> <span class="n">of</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">8.5</span> <span class="ow">is</span><span class="p">:</span> <span class="mf">17.863</span>
</pre></div>
</div>
<p>We can also use the results from the <code class="docutils literal"><span class="pre">ols</span></code> command to make a scatterplot with
the trendline through it.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Linear Regression with Fitted Values&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xv</span><span class="p">,</span> <span class="n">yv</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xv</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">y_predict</span><span class="p">,</span><span class="s1">&#39;k-&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Linear regression&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Data&#39;</span><span class="p">,</span> <span class="s1">&#39;OLS&#39;</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/Slides_Data_Scatter2_1.png"><img alt="_images/Slides_Data_Scatter2_1.png" src="_images/Slides_Data_Scatter2_1.png" style="width: 12cm;" /></a>
<p><strong>Example 2: OLS with categorical (dummy variables)</strong></p>
<p>The next example is a bit more involved as we increase the number of
explanatory variables. In addition, some explanatory variables are categorical
variables. In order to use them in our OLS regression we first have to make so
called <strong>dummy</strong> variables (i.e. indicator variables that are either 0 or 1).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filepath</span> <span class="o">+</span> <span class="s1">&#39;Lecture_Data_Excel_b.csv&#39;</span><span class="p">)</span>

<span class="n">dummies</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Race&#39;</span><span class="p">],</span> <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dummies</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="n">Height</span>  <span class="n">Response</span>  <span class="n">AverageMathSAT</span>  <span class="n">Age</span>  <span class="n">Female</span>  <span class="n">Education</span>  <span class="n">Race</span>
<span class="n">d_Blk</span>  \
<span class="mi">0</span>     <span class="mf">1.1</span>         <span class="mi">3</span>             <span class="mi">370</span>   <span class="mi">20</span>       <span class="mi">0</span>          <span class="mi">2</span>  <span class="n">Hisp</span>
<span class="mi">0</span>
<span class="mi">1</span>     <span class="mf">1.2</span>         <span class="mi">4</span>             <span class="mi">393</span>   <span class="mi">20</span>       <span class="mi">0</span>          <span class="mi">4</span>   <span class="n">Wht</span>
<span class="mi">0</span>
<span class="mi">2</span>     <span class="mf">1.3</span>         <span class="mi">4</span>             <span class="mi">413</span>   <span class="mi">20</span>       <span class="mi">0</span>          <span class="mi">4</span>   <span class="n">Blk</span>
<span class="mi">1</span>
<span class="mi">3</span>     <span class="mf">1.4</span>         <span class="mi">5</span>             <span class="mi">430</span>   <span class="mi">20</span>       <span class="mi">0</span>          <span class="mi">4</span>   <span class="n">Wht</span>
<span class="mi">0</span>
<span class="mi">4</span>     <span class="mf">1.5</span>         <span class="mi">3</span>             <span class="mi">440</span>   <span class="mi">20</span>       <span class="mi">0</span>          <span class="mi">2</span>   <span class="n">Mex</span>
<span class="mi">0</span>

   <span class="n">d_Hisp</span>  <span class="n">d_Mex</span>  <span class="n">d_Oth</span>  <span class="n">d_Wht</span>
<span class="mi">0</span>       <span class="mi">1</span>      <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">1</span>       <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">1</span>
<span class="mi">2</span>       <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">3</span>       <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">1</span>
<span class="mi">4</span>       <span class="mi">0</span>      <span class="mi">1</span>      <span class="mi">0</span>      <span class="mi">0</span>
</pre></div>
</div>
<p>We next use <code class="docutils literal"><span class="pre">ols</span></code> again to run the regression. At the end we make a
prediction based on some values for the independent variables <code class="docutils literal"><span class="pre">x1</span></code>, <code class="docutils literal"><span class="pre">x2</span></code>,
etc.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Height&#39;</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span><span class="s1">&#39;Education&#39;</span><span class="p">,</span><span class="s1">&#39;Female&#39;</span><span class="p">,</span> \
    <span class="s1">&#39;d_Blk&#39;</span><span class="p">,</span><span class="s1">&#39;d_Hisp&#39;</span><span class="p">,</span><span class="s1">&#39;d_Mex&#39;</span><span class="p">,</span><span class="s1">&#39;d_Wht&#39;</span><span class="p">]])</span>

<span class="c1"># Show coefficient estimates</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="k">print</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Parameters:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">beta</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">-------------------------</span><span class="n">Summary</span> <span class="n">of</span> <span class="n">Regression</span>
<span class="n">Analysis</span><span class="o">-------------------------</span>

<span class="n">Formula</span><span class="p">:</span> <span class="n">Y</span> <span class="o">~</span> <span class="o">&lt;</span><span class="n">Age</span><span class="o">&gt;</span> <span class="o">+</span> <span class="o">&lt;</span><span class="n">Education</span><span class="o">&gt;</span> <span class="o">+</span> <span class="o">&lt;</span><span class="n">Female</span><span class="o">&gt;</span> <span class="o">+</span> <span class="o">&lt;</span><span class="n">d_Blk</span><span class="o">&gt;</span> <span class="o">+</span> <span class="o">&lt;</span><span class="n">d_Hisp</span><span class="o">&gt;</span> <span class="o">+</span>
<span class="o">&lt;</span><span class="n">d_Mex</span><span class="o">&gt;</span>
             <span class="o">+</span> <span class="o">&lt;</span><span class="n">d_Wht</span><span class="o">&gt;</span> <span class="o">+</span> <span class="o">&lt;</span><span class="n">intercept</span><span class="o">&gt;</span>

<span class="n">Number</span> <span class="n">of</span> <span class="n">Observations</span><span class="p">:</span>         <span class="mi">60</span>
<span class="n">Number</span> <span class="n">of</span> <span class="n">Degrees</span> <span class="n">of</span> <span class="n">Freedom</span><span class="p">:</span>   <span class="mi">8</span>

<span class="n">R</span><span class="o">-</span><span class="n">squared</span><span class="p">:</span>         <span class="mf">0.9437</span>
<span class="n">Adj</span> <span class="n">R</span><span class="o">-</span><span class="n">squared</span><span class="p">:</span>     <span class="mf">0.9361</span>

<span class="n">Rmse</span><span class="p">:</span>              <span class="mf">0.9030</span>

<span class="n">F</span><span class="o">-</span><span class="n">stat</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">52</span><span class="p">):</span>   <span class="mf">124.4348</span><span class="p">,</span> <span class="n">p</span><span class="o">-</span><span class="n">value</span><span class="p">:</span>     <span class="mf">0.0000</span>

<span class="n">Degrees</span> <span class="n">of</span> <span class="n">Freedom</span><span class="p">:</span> <span class="n">model</span> <span class="mi">7</span><span class="p">,</span> <span class="n">resid</span> <span class="mi">52</span>

<span class="o">-----------------------</span><span class="n">Summary</span> <span class="n">of</span> <span class="n">Estimated</span>
<span class="n">Coefficients</span><span class="o">------------------------</span>
      <span class="n">Variable</span>       <span class="n">Coef</span>    <span class="n">Std</span> <span class="n">Err</span>     <span class="n">t</span><span class="o">-</span><span class="n">stat</span>    <span class="n">p</span><span class="o">-</span><span class="n">value</span>    <span class="n">CI</span> <span class="mf">2.5</span><span class="o">%</span>
<span class="n">CI</span> <span class="mf">97.5</span><span class="o">%</span>
<span class="o">--------------------------------------------------------------------------------</span>
           <span class="n">Age</span>     <span class="mf">1.8944</span>     <span class="mf">0.1241</span>      <span class="mf">15.27</span>     <span class="mf">0.0000</span>     <span class="mf">1.6512</span>
<span class="mf">2.1375</span>
     <span class="n">Education</span>    <span class="o">-</span><span class="mf">0.0514</span>     <span class="mf">0.1265</span>      <span class="o">-</span><span class="mf">0.41</span>     <span class="mf">0.6864</span>    <span class="o">-</span><span class="mf">0.2994</span>
<span class="mf">0.1967</span>
        <span class="n">Female</span>     <span class="mf">8.7359</span>     <span class="mf">0.3077</span>      <span class="mf">28.39</span>     <span class="mf">0.0000</span>     <span class="mf">8.1327</span>
<span class="mf">9.3391</span>
         <span class="n">d_Blk</span>    <span class="o">-</span><span class="mf">0.3784</span>     <span class="mf">0.6855</span>      <span class="o">-</span><span class="mf">0.55</span>     <span class="mf">0.5834</span>    <span class="o">-</span><span class="mf">1.7220</span>
<span class="mf">0.9653</span>
        <span class="n">d_Hisp</span>    <span class="o">-</span><span class="mf">1.0267</span>     <span class="mf">0.7901</span>      <span class="o">-</span><span class="mf">1.30</span>     <span class="mf">0.1995</span>    <span class="o">-</span><span class="mf">2.5753</span>
<span class="mf">0.5218</span>
<span class="o">--------------------------------------------------------------------------------</span>
         <span class="n">d_Mex</span>    <span class="o">-</span><span class="mf">0.5749</span>     <span class="mf">0.6863</span>      <span class="o">-</span><span class="mf">0.84</span>     <span class="mf">0.4060</span>    <span class="o">-</span><span class="mf">1.9200</span>
<span class="mf">0.7701</span>
         <span class="n">d_Wht</span>     <span class="mf">0.0816</span>     <span class="mf">0.6808</span>       <span class="mf">0.12</span>     <span class="mf">0.9050</span>    <span class="o">-</span><span class="mf">1.2528</span>
<span class="mf">1.4161</span>
     <span class="n">intercept</span>   <span class="o">-</span><span class="mf">35.2714</span>     <span class="mf">2.7510</span>     <span class="o">-</span><span class="mf">12.82</span>     <span class="mf">0.0000</span>   <span class="o">-</span><span class="mf">40.6634</span>
<span class="o">-</span><span class="mf">29.8794</span>
<span class="o">---------------------------------</span><span class="n">End</span> <span class="n">of</span>
<span class="n">Summary</span><span class="o">---------------------------------</span>


<span class="n">Parameters</span><span class="p">:</span>
<span class="n">Age</span>           <span class="mf">1.894377</span>
<span class="n">Education</span>    <span class="o">-</span><span class="mf">0.051375</span>
<span class="n">Female</span>        <span class="mf">8.735906</span>
<span class="n">d_Blk</span>        <span class="o">-</span><span class="mf">0.378358</span>
<span class="n">d_Hisp</span>       <span class="o">-</span><span class="mf">1.026743</span>
<span class="n">d_Mex</span>        <span class="o">-</span><span class="mf">0.574949</span>
<span class="n">d_Wht</span>         <span class="mf">0.081628</span>
<span class="n">intercept</span>   <span class="o">-</span><span class="mf">35.271435</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>
</pre></div>
</div>
<p>Prediction: size of 8.5 will produce a math score of …</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">betas</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">beta</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Prediction: {}&quot;</span><span class="o">.</span>\
  <span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">betas</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mf">2.5</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]))))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Prediction</span><span class="p">:</span> <span class="mf">193.65914627657307</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Juergen Jung.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>