

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>14. The cake eating problem &mdash; Computational Economics 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Computational Economics 1.0 documentation" href="index.html"/>
        <link rel="next" title="15. A simple OLG model" href="Slides_OLG_I.html"/>
        <link rel="prev" title="13. Optimization" href="Slides_Optimization.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Computational Economics</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Slides_CourseAdministration.html">1. Course Administration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_CourseAdministration.html#installing-python">1.1. Installing Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_CourseAdministration.html#git-and-github">1.2. Git and Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_CourseAdministration.html#submitting-homework-midterm-and-the-final-via-github">1.3. Submitting homework, midterm and the final via GitHub</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Basics.html">2. First steps in Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Basics.html#simple-calculations">2.1. Simple calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Basics.html#the-print-function">2.2. The print function</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Basics.html#script-files">2.3. Script files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Basics.html#ipython-notebook">2.4. iPython Notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Basics.html#lists-tuples-and-dictionaries">2.5. Lists, tuples and dictionaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Basics.html#in-class-exercises">2.6. In class exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Loop.html">3. Basic programming techniques</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Loop.html#branching">3.1. Branching</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Loop.html#for-loops">3.2. For loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Loop.html#while-loop">3.3. While loop</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Debugging.html">4. Debugging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Debugging.html#using-print-statements-to-spot-mistakes">4.1. Using print statements to spot mistakes</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Debugging.html#using-the-debugger">4.2. Using the debugger</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Debugging.html#in-class-exercises">4.3. In class exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Arrays.html">5. Vectors and matrices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Arrays.html#definitions-of-vectors-and-matrices">5.1. Definitions of vectors and matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Arrays.html#simple-calculations-with-vectors-and-matrices">5.2. Simple calculations with vectors and matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Arrays.html#vector-manipulation">5.3. Vector manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Arrays.html#matrix-manipulation">5.4. Matrix manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Arrays.html#in-class-exercises">5.5. In class exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Plot.html">6. Plotting using <tt class="docutils literal"><span class="pre">matplotlib</span></tt></a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Plot.html#plotting-vectors-and-arrays">6.1. Plotting vectors and arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Plot.html#plotting-functions">6.2. Plotting functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Plot.html#subplots">6.3. Subplots</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Plot.html#d-graphs">6.4. 3D-Graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Plot.html#homework">6.5. Homework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Functions.html">7. Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Functions.html#use-simple-user-defined-functions">7.1. Use simple user defined functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Functions.html#advanced-graphing-using-loops-and-functions">7.2. Advanced Graphing using loops and functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Functions.html#scope-of-variables-in-functions">7.3. Scope of variables in functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Functions.html#functions-with-default-arguments">7.4. Functions with default arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Functions.html#in-class-exercises">7.5. In class exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_OOP.html">8. Object Oriented Programming</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_OOP.html#introduction">8.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OOP.html#inheritance-and-subclasses">8.2. Inheritance and subclasses</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OOP.html#generating-multiple-objects">8.3. Generating multiple objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OOP.html#homework">8.4. Homework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Data.html">9. Working with data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Data.html#read-in-small-data-set-from-a-comma-separated-csv-file">9.1. Read in small data set from a comma separated (.csv) file</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Data.html#making-simple-graphs-from-our-data">9.2. Making simple graphs from our data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Data.html#summary-statistics">9.3. Summary statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Data.html#measures-of-linear-relationship">9.4. Measures of linear relationship</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_WebData.html">10. Working with data from the web</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_WebData.html#more-tutorials">10.1. More tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_WebData.html#homework">10.2. Homework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Random.html">11. Random numbers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Random.html#uniformly-distributed-random-numbers">11.1. Uniformly distributed random numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Random.html#normally-distributed-random-numbers">11.2. Normally distributed random numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Random.html#t-distributed-random-variable">11.3. T-distributed random variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Random.html#homework">11.4. Homework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Root.html">12. Root finding</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Root.html#first-steps">12.1. First steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Root.html#newton-raphson">12.2. Newton-Raphson</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Root.html#secant-method">12.3. Secant method</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Root.html#bisection">12.4. Bisection</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Root.html#using-built-in-unit-root-function">12.5. Using built in unit-root function</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Root.html#homework">12.6. Homework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Optimization.html">13. Optimization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Optimization.html#univariate-function-optimization">13.1. Univariate function optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Optimization.html#optimization-methods">13.2. Optimization methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Optimization.html#multivariate-optimization">13.3. Multivariate optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Optimization.html#finding-the-root-of-a-function-using-minimization">13.4. Finding the root of a function using minimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Optimization.html#homework">13.5. Homework</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">14. The cake eating problem</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#solution">14.1. Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#formally">14.2. Formally</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">14.3. Formally</a></li>
<li class="toctree-l2"><a class="reference internal" href="#analytical-solution">14.4. Analytical solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#euler-equation">14.5. Euler equation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solving-the-problem">14.6. Solving the problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solving-the-problem-analytics">14.7. Solving the problem: analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-the-solution">14.8. Plotting the solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#numerical-solution">14.9. Numerical solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#function-definitions">14.10. Function definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-is-achieved-via">14.11. Plotting is achieved via:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#numerical-solution-in-python">14.12. Numerical solution in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optimizer-in-optimize-toolbox">14.13. Optimizer in <tt class="docutils literal"><span class="pre">optimize</span></tt> toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="#homework">14.14. Homework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_OLG_I.html">15. A simple OLG model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#preferences">15.1. Preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#technology">15.2. Technology</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#government">15.3. Government</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#household-problem">15.4. Household problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#equilibrium-definition">15.5. Equilibrium definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#functional-forms-and-solutions">15.6. Functional forms and solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#substitute-the-budget-set-into-preferences">15.7. Substitute the budget set into preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#solve-for-optimal-household-savings">15.8. Solve for optimal household savings: <span class="math">\(s^*\)</span></a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#solution">15.9. Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#equation-system">15.10. Equation system</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#method-1-substituting-everything">15.11. Method 1: Substituting everything</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#one-equation-in-k">15.12. One equation in K</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#aggregate-resource-constraint-arc">15.13. Aggregate resource constraint (ARC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#python-program-1">15.14. Python Program 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#method-2">15.15. Method 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#python-program-2">15.16. Python Program 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_I.html#homework">15.17. Homework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_OLG_II.html">16. An OLG model with labor-leisure choice</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_II.html#preferences">16.1. Preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_II.html#technology">16.2. Technology</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_II.html#government">16.3. Government</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_II.html#household-problem">16.4. Household problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_II.html#equilibrium-definition">16.5. Equilibrium definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_II.html#functional-forms-and-solutions">16.6. Functional forms and solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_II.html#substitute-in-preferences">16.7. Substitute in preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_II.html#solve-for-optimal-and">16.8. Solve for optimal <span class="math">\(s^*\)</span> and <span class="math">\(l^*\)</span></a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_OLG_II.html#homework">16.9. Homework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Growth.html">17. Growth Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Slides_Growth.html#preferences">17.1. Preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Growth.html#technology">17.2. Technology</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Growth.html#government">17.3. Government</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Growth.html#household-problem">17.4. Household problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Growth.html#equilibrium-definition">17.5. Equilibrium definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Growth.html#functional-forms-and-solutions">17.6. Functional forms and solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Growth.html#substitute-in-preferences">17.7. Substitute in preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Growth.html#solve-for-optimal-and">17.8. Solve for optimal <span class="math">\(s^*\)</span> and <span class="math">\(l^*\)</span></a></li>
<li class="toctree-l2"><a class="reference internal" href="Slides_Growth.html#homework">17.9. Homework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Slides_Homework.html">18. Homework</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Computational Economics</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>14. The cake eating problem</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/Slides_Cake.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="the-cake-eating-problem">
<h1>14. The cake eating problem<a class="headerlink" href="#the-cake-eating-problem" title="Permalink to this headline">¶</a></h1>
<p>Once upon a time there was a little girl who got a cake. The girl decided to eat
the cake all alone. But she was not sure when she wanted to eat the cake. First,
she thought of eating the whole cake right away. But then, nothing would be left for
tomorrow and the day after tomorrow.</p>
<p>Well, on the one hand, eating cake today is better than eating eat it tomorrow.
On the other hand, eating too much at the same time might not be the best.
She imagined that the first mouthful of cake is a real treat, the second is great,
the third is also nice. But the more you eat, the less you enjoy it.</p>
<p>So, she decided to eat only a bit of the
cake everyday. Then, she could eat everyday another first mouthful of cake.
The girl knew that the cake would be spoiled if she kept it more than nine
days. Therefore, she would eat the cake in the first ten days. Yet, how much
should she eat everyday?</p>
<div class="section" id="solution">
<h2>14.1. Solution<a class="headerlink" href="#solution" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>She thought of eating everyday a piece of the same size.</li>
<li>But if eating cake today is better than waiting for tomorrow, how can it possibly</li>
</ul>
<p>be the best to do the same today as tomorrow?
* If I ate just a little bit less tomorrow and a little bit more today I would be
better off, she concluded.</p>
<ul class="simple">
<li>And she would eat everyday a bit less than the previous day and the cake</li>
</ul>
<p>would last ten days long and nothing would be left in the end</p>
</div>
<div class="section" id="formally">
<h2>14.2. Formally<a class="headerlink" href="#formally" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Assume preferences in every period <span class="math">\(t\)</span> follow: <span class="math">\(u(c_t) = ln(c_t)\)</span></li>
<li><span class="math">\(c_t\)</span> is the amount of cake consumed in period <span class="math">\(t\)</span></li>
<li>Futureconsumption is discounted with the time-preference factor <span class="math">\(\beta&lt; 1\)</span>.</li>
<li>The present value in period 0 of the whole consumption path is:</li>
</ul>
<p><span class="math">\(V( c_1 ,c_2 ,...,c_T ) = \sum_{t=1}^{T} \beta^{t} U(c_t)\)</span></p>
<ul class="simple">
<li>The person tries to maximize this by choosing its consumption in period <span class="math">\(t=0,..,T\)</span></li>
</ul>
</div>
<div class="section" id="id1">
<h2>14.3. Formally<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The cake size in the next period <span class="math">\(t+1\)</span> is the size today less the consumption today</li>
</ul>
<p><span class="math">\(k_{t+1} = k_{t} - c_{t}\)</span></p>
<ul class="simple">
<li>Therefore, the cake size must be nonnegative in any period:</li>
</ul>
<p><span class="math">\(k_t \ge 0\)</span></p>
</div>
<div class="section" id="analytical-solution">
<h2>14.4. Analytical solution<a class="headerlink" href="#analytical-solution" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Substituting the contraint into the life-time consumption path we get:</li>
</ul>
<p><span class="math">\(\beta^t U(k_{t-1} - k_{t})+ \beta^{t+1}  U(k_{t} - k_{t+1})\)</span></p>
<ul class="simple">
<li>Deriving this objective function w.r.t. <span class="math">\(k_t\)</span> we get:</li>
</ul>
<p><span class="math">\(U'(c_{t-1}) = \beta U'(c_{t})\)</span></p>
<ul class="simple">
<li>This is the so called &#8216;Euler Equation&#8217;</li>
</ul>
</div>
<div class="section" id="euler-equation">
<h2>14.5. Euler equation<a class="headerlink" href="#euler-equation" title="Permalink to this headline">¶</a></h2>
<p><span class="math">\(U'(c_{t}) = \beta U'(c_{t+1})\)</span></p>
<ul class="simple">
<li>The Euler equation has an intuitive interpretation</li>
<li>At a utility maximum, the consumer cannot gain from feasible shifts of consumption between periods</li>
<li>A one-unit reduction in period <span class="math">\(t\)</span> consumption lowers <span class="math">\(U_t\)</span> by <span class="math">\(U'_t\)</span>.</li>
<li>This unit saved can be shifted to period  <span class="math">\(t+1\)</span> where it raises utility by <span class="math">\(U'_{t+1}\)</span> discounted to period <span class="math">\(t\)</span>, that is: <span class="math">\(\beta U'_{t+1}\)</span></li>
<li>In the optimum these two quantities must be equal</li>
</ul>
</div>
<div class="section" id="solving-the-problem">
<h2>14.6. Solving the problem<a class="headerlink" href="#solving-the-problem" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Pluging the functional for into the Euler equation we get:</li>
</ul>
<p><span class="math">\(c_{t+1} = \beta c_{t}\)</span></p>
<ul class="simple">
<li>In the optimum we know that: <span class="math">\(k_{T+1} = 0\)</span></li>
<li>Recursively plugging the budget constraint into the Euler equation we get:</li>
</ul>
<p><span class="math">\(c_0=\frac{1-\beta}{(1-\beta)^{T+1}}k_0\)</span></p>
<ul class="simple">
<li>We can now map out the optimal consumption for any size cake: <span class="math">\(k_0\)</span></li>
</ul>
</div>
<div class="section" id="solving-the-problem-analytics">
<h2>14.7. Solving the problem: analytics<a class="headerlink" href="#solving-the-problem-analytics" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><span class="math">\(c_T = k_T\)</span> in the last period, eat entire cake</p>
</li>
<li><dl class="first docutils">
<dt><span class="math">\(c_{T-1}\)</span> we get by:</dt>
<dd><ol class="first last arabic simple">
<li>Substituting the Euler equation we have: <span class="math">\(c_{T-1}=\frac{1}{\beta} c_T=\frac{1}{\beta} k_T\)</span></li>
<li>Substituting the budget constraint: <span class="math">\(c_{T-1}=\frac{1}{\beta} (k_{T-1} - c_{T-1})\)</span></li>
<li>Which can be solved for: <span class="math">\(c_{T-1}=\frac{1}{1+\beta} k_{T-1}\)</span></li>
</ol>
</dd>
</dl>
</li>
<li><p class="first">Continue with this and find: <span class="math">\(c_{T-T} = \frac{1}{1+\beta + \beta^2 +...+\beta^T} k_{T-T}\)</span></p>
</li>
<li><p class="first">Using: <span class="math">\(\sum_{t=1}^{T}\beta^t = \frac{1-\beta^{T+1}}{1-\beta}\)</span>, we get</p>
</li>
<li><p class="first"><span class="math">\(c_0=\frac{1-\beta}{(1-\beta)^{T+1}}k_0\)</span></p>
</li>
</ul>
</div>
<div class="section" id="plotting-the-solution">
<h2>14.8. Plotting the solution<a class="headerlink" href="#plotting-the-solution" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>For any size <span class="math">\(k+0\)</span> and time horizon <span class="math">\(T\)</span> we can now calculate the optimal consumption in each period</li>
<li>Example: <span class="math">\(k_0 = 50\)</span>, <span class="math">\(T=10\)</span>, and <span class="math">\(\beta = 0.96\)</span></li>
</ul>
</div>
<div class="section" id="numerical-solution">
<h2>14.9. Numerical solution<a class="headerlink" href="#numerical-solution" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>For a numerical solution we use the <tt class="docutils literal"><span class="pre">Rsolnp</span></tt> package</li>
<li>The routine <tt class="docutils literal"><span class="pre">solnp</span></tt> minimizes constrained non-linear functions</li>
<li>The constraints can be equality or inequality constraints</li>
<li>Our problem has one equality constraint:</li>
<li>We define the objective function <tt class="docutils literal"><span class="pre">func1</span></tt> as:</li>
</ul>
<p><span class="math">\(\sum_{t=0}^{T}\beta^{t} U(c_t)\)</span></p>
<ul class="simple">
<li>The constraint is defined as function <tt class="docutils literal"><span class="pre">eqn1</span></tt>:</li>
</ul>
<p><span class="math">\(c_0+c_1+...+c_T=k_0\)</span></p>
</div>
<div class="section" id="function-definitions">
<h2>14.10. Function definitions<a class="headerlink" href="#function-definitions" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">math</span> <span class="kn">as</span> <span class="nn">m</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span> <span class="k">as</span> <span class="n">st</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">optimize</span>
<span class="kn">import</span> <span class="nn">time</span>            <span class="c"># Imports system time module to time your</span>
<span class="n">script</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s">&#39;all&#39;</span><span class="p">)</span>  <span class="c"># close all open figures</span>
</pre></div>
</div>
<p>Call the optimizer with some starting values for the consumption vector</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">T</span> <span class="o">=</span> <span class="mi">9</span>
<span class="n">beta</span> <span class="o">=</span> <span class="mf">0.9</span>
<span class="n">kv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">T</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nb">float</span><span class="p">)</span>
<span class="n">cv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">T</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nb">float</span><span class="p">)</span>
<span class="n">uv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">T</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nb">float</span><span class="p">)</span>
<span class="n">kv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>                            <span class="c"># k0</span>
<span class="n">cv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="o">-</span><span class="n">beta</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">-</span><span class="n">beta</span><span class="o">**</span><span class="p">(</span><span class="n">T</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="n">kv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c"># c0</span>
<span class="n">uv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">cv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">T</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
    <span class="c">#print &quot;i=&quot; + str(i)</span>
    <span class="n">cv</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">beta</span> <span class="o">*</span> <span class="n">cv</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">kv</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">kv</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">cv</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">uv</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">beta</span><span class="o">**</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">cv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c"># period utility with</span>
<span class="n">discounting</span>

<span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">uv</span><span class="p">)</span>  <span class="c"># total utility</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;cv= &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cv</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;kv= &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">kv</span><span class="p">))</span>
</pre></div>
</div>
<div class="code highlight-python"><div class="highlight"><pre>cv= [ 15.35  13.82  12.44  11.19  10.07   9.07   8.16   7.34   6.61
5.95]
kv= [ 100.     84.65   70.83   58.39   47.2    37.13   28.06   19.9
12.56
    5.95]
</pre></div>
</div>
</div>
<div class="section" id="plotting-is-achieved-via">
<h2>14.11. Plotting is achieved via:<a class="headerlink" href="#plotting-is-achieved-via" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="c">#</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">cv</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;r$c_t$&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Period t&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;Consumption&#39;</span><span class="p">)</span>
<span class="c">#</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kv</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;r$k_t$&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Period t&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;Cake size&#39;</span><span class="p">)</span>
<span class="c">#</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/Slides_Cake_Cake_1.png"><img alt="_images/Slides_Cake_Cake_1.png" src="_images/Slides_Cake_Cake_1.png" style="width: 12cm;" /></a>
</div>
<div class="section" id="numerical-solution-in-python">
<h2>14.12. Numerical solution in Python<a class="headerlink" href="#numerical-solution-in-python" title="Permalink to this headline">¶</a></h2>
<p>Define functions:</p>
<div class="code python highlight-python"><div class="highlight"><pre>def func1(cv):
    T = len(cv)
    uv= np.zeros(T,float)
    for i in range(T):
        beta = 0.9
        uv[i] = (beta**i) * np.log(cv[i])  # period utility with
discounting
    return (-np.sum(uv))
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c"># The constraint</span>
<span class="k">def</span> <span class="nf">eqn1</span><span class="p">(</span><span class="n">cv</span><span class="p">):</span>
    <span class="n">k0</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">z1</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">cv</span><span class="p">)</span> <span class="o">-</span> <span class="n">k0</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">z1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="optimizer-in-optimize-toolbox">
<h2>14.13. Optimizer in <tt class="docutils literal"><span class="pre">optimize</span></tt> toolbox<a class="headerlink" href="#optimizer-in-optimize-toolbox" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">T</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">x0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="nb">float</span><span class="p">)</span><span class="o">*</span><span class="mf">0.1</span>
<span class="n">coptv</span><span class="o">=</span> <span class="n">optimize</span><span class="o">.</span><span class="n">fmin_slsqp</span><span class="p">(</span><span class="n">func1</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">f_eqcons</span> <span class="o">=</span> <span class="n">eqn1</span><span class="p">)</span>  <span class="c">#, f_eqcons =</span>
<span class="n">eqn1</span>
</pre></div>
</div>
<div class="code highlight-python"><div class="highlight"><pre>Optimization terminated successfully.    (Exit mode 0)
            Current function value: -15.2873553609
            Iterations: 22
            Function evaluations: 264
            Gradient evaluations: 22
</pre></div>
</div>
<p>And finally we plot the optimal consumption.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c"># Plot analytical and numerical solution</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">T</span><span class="p">),</span> <span class="n">cv</span><span class="p">,</span> <span class="s">&#39;b-&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">T</span><span class="p">),</span> <span class="n">coptv</span><span class="p">,</span> <span class="s">&#39;r--&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&quot;Optimal consumption&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&quot;Period t&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&quot;c_t&quot;</span><span class="p">)</span>
<span class="c"># Create a legend</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s">&#39;analytical&#39;</span><span class="p">,</span> <span class="s">&#39;numerical&#39;</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s">&#39;best&#39;</span><span class="p">,</span> <span class="n">shadow</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;Analytic solution cv =&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cv</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;Numeric soluntion cv =&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">())</span>
</pre></div>
</div>
<div class="code highlight-python"><div class="highlight"><pre>Analytic solution cv =[ 15.35  13.82  12.44  11.19  10.07   9.07
8.16   7.34   6.61   5.95]
Numeric soluntion cv =
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/Slides_Cake_Optimal_Consumption_1.png"><img alt="_images/Slides_Cake_Optimal_Consumption_1.png" src="_images/Slides_Cake_Optimal_Consumption_1.png" style="width: 12cm;" /></a>
</div>
<div class="section" id="homework">
<h2>14.14. Homework<a class="headerlink" href="#homework" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="Lecture_Cake/Homework/Homework_Cake.html"><em>Homework 10</em></a></p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Slides_OLG_I.html" class="btn btn-neutral float-right" title="15. A simple OLG model"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Slides_Optimization.html" class="btn btn-neutral" title="13. Optimization"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Juergen Jung.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>